(function(_ds){var window=this;var Sra=function(a){let b=a,c;return function(){if(b){const d=b;b=void 0;c=d.apply(this,arguments)}return c}};var L3=function(a,b,c){return a.j.then(function(d){const e=d[b];if(!e)throw Error(`Method not found: ${b}`);return e.apply(d,c)})},Tra=class{constructor(a){this.j=a;a.then((0,_ds.eh)(function(){},this),()=>{},this)}},Ura=function(a,b,c){const d=Array(arguments.length-2);for(var e=2;e<arguments.length;e++)d[e-2]=arguments[e];e=M3(a,b).then(f=>f.apply(null,d),f=>{f=Error(`Help service failed to load serviceFactory: ${b} from serviceUrl:${a}`,{cause:f});delete N3[b];return _ds.Qo(f)});return new Tra(e)},
N3={},M3=function(a,b){var c=N3[b];if(c)return c;c=(c=_ds.Ah(b))?_ds.Po(c):(new _ds.Lo(function(d,e){const f=(new _ds.Ql(document)).createElement("SCRIPT");f.async=!0;_ds.Xf(f,_ds.Df(_ds.Al(a)));f.onload=f.onreadystatechange=function(){f.readyState&&f.readyState!="loaded"&&f.readyState!="complete"||d()};f.onerror=g=>{e(Error(`Could not load ${b} Help API from ${a}`,{cause:g}))};(document.head||document.getElementsByTagName("head")[0]).appendChild(f)})).then(function(){const d=_ds.Ah(b);if(!d)throw Error(`Failed to load ${b} from ${a}`);
return d});return N3[b]=c};var Vra={GOOGLE:"https://www.google.com",hK:"https://support.google.com",GJ:"https://play.google.com"},Wra=async function(a){for(const b of Object.values(Vra))try{(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:b})).state!=="granted"&&a.j.push(b)}catch(c){break}};(new class{constructor(){this.j=[];this.m=[];this.ma=Sra(async()=>{if(typeof document==="undefined"||document.requestStorageAccessFor===void 0||navigator.permissions===void 0||navigator.permissions.query===void 0||location.hostname.match(".+\\.google\\.com$"))return Promise.resolve();await Wra(this);this.j.length>0&&document.addEventListener("click",this.o)});this.o=()=>{if(!(this.m.length>0)){for(const a of this.j)try{this.m.push(document.requestStorageAccessFor(a))}catch(b){}Promise.all(this.m).then(()=>
{}).catch(()=>{}).finally(()=>{this.reset()})}}}reset(){document.removeEventListener("click",this.o)}}).ma();var Xra=class{constructor(a){this.j=a}ma(a){L3(this.j,"requestSurvey",arguments).ea(()=>{},this)}o(a){L3(this.j,"presentSurvey",arguments).ea(()=>{},this)}m(a){L3(this.j,"dismissSurvey",arguments).ea(()=>{},this)}},O3=_ds.Bl("https://www.gstatic.com/feedback/js/help/prod/service/lazy.min.js");M3(O3,"help.service.Lazy.create").ea(()=>{});var P3=function(){return"devsite-hats-survey"},T3=function(){if(Q3){let a;(a=R3)==null||a.m({surveyMetadata:{sessionId:Q3}});return S3.promise}return Promise.resolve()},Yra=async function(a){var b=await _ds.t(),c=b.getConfig();var d=_ds.z(c,18);(c=a.getAttribute("listnr-id"))?(b={locale:b.getLocale()||"en",apiKey:d},b=Ura(O3,"help.service.Lazy.create",c,{apiKey:b.apiKey||b.apiKey,asxUiUri:b.asxUiUri||b.asxUiUri,environment:b.environment||b.environment,flow:b.flow||b.flow,frdProductData:b.frdProductData||
b.frdProductData,frdProductDataSerializedJspb:b.kL||b.frdProductDataSerializedJspb,helpCenterPath:b.helpCenterPath||b.helpCenterPath,locale:b.locale||b.locale||"en".replace(/-/g,"_"),nonce:b.nonce||b.nonce,productData:b.productData||b.productData,receiverUri:b.receiverUri||b.receiverUri,renderApiUri:b.renderApiUri||b.renderApiUri,theme:b.theme||b.theme,window:b.window||b.window}),R3=new Xra(b),a.j=R3):console.warn('<devsite-hats-survey> missing attribute "listnr-id"')},Zra=function(a,b){let c;(c=
a.j)==null||c.o({productData:{customData:{pageUrl:_ds.B().toString()}},surveyData:b,colorScheme:1,authuser:0,customZIndex:1E4,listener:{surveyPrompted:d=>{Q3=d.sessionId||null;S3=new _ds.Vg;U3=S3.resolve},surveyClosed:()=>{Q3=V3=null;U3()}}})},X3=class extends _ds.nl{constructor(a){super();this.j=null;a&&(this.j=R3=a)}async connectedCallback(){V3=this;const a=this.getAttribute("hats-id");a&&a!==W3&&(await T3(),this.j||await Yra(this),W3=a,await this.Jj(a))}disconnectedCallback(){V3=null;_ds.hp($ra,
document.body,"devsite-page-changed",()=>{V3||(T3(),W3=null)})}async Jj(a){await _ds.t();let b;(b=this.j)==null||b.ma({triggerId:a,callback:c=>{c.surveyData&&Zra(this,c.surveyData)},authuser:0,enableTestingMode:!1})}};X3.prototype.renderSurvey=X3.prototype.Jj;X3.prototype.disconnectedCallback=X3.prototype.disconnectedCallback;X3.prototype.connectedCallback=X3.prototype.connectedCallback;X3.closeCurrentSurvey=T3;X3.getTagName=P3;
var W3=null,Q3=null,V3=null,S3=new _ds.Vg,U3=S3.resolve,$ra=new _ds.C,R3=void 0;try{customElements.define(P3(),X3)}catch(a){console.warn("devsite.app.customElement.DevsiteHatsSurvey",a)};})(_ds_www);
