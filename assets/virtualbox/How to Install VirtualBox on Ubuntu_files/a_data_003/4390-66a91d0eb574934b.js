"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4390],{34390:function(t,i,e){let s,a;e.d(i,{XD:function(){return O},pd:function(){return k},Kj:function(){return I}});var n=e(30154),l=e(98951),o=e(5490),d=e(75864),c=e(48152),r=e(72898),g=e(87393);let _=!1;async function p(){c.Z.on("gpc.sendSignal",t=>{t&&y(t)}),c.Z.send("gpc.getSignal")}async function y(t){let{updateGpcSignal:i}=g.T4.getState();_||i(t)}var u=e(95929),v=e(66474);let w=t=>{window.Clym={};let i=t.widget||{};window.Clym.widget=i};var b=e(55156),h=e(21330),f=e(23564);let S={assistant:"ASSISTANT",chat:"CHAT",widget:"WIDGET"},O=async()=>{var t,i,e,s,a,y,O,C,m,A,D,N,L,W,Z,K,G,M,P;let V=(0,v.pm)(),q=S[V.page]||"WIDGET",R="true"===V.native;V.accessibility_only="true"===V.accessibility_only,V._api&&(0,n.Tk)(V._api),(0,n.r)(window.location.pathname),"WIDGET"===q&&T(),E(),await c.Z.connect(V.channel),p();let B={widget:{},profile:{},consent:{}};"CHAT"!==q&&(B=await I());let H=!!(null==B?void 0:null===(i=B.widget)||void 0===i?void 0:null===(t=i.settings)||void 0===t?void 0:t.sanctions);V.accessibility_only&&(H=!1),!R&&"WIDGET"===q&&H&&(0,d.K6)("/query/restrictions",{id:d.hi.widgetId},{portal:!0,silent:!0,sc:"_rest"}).then(t=>{var i;t&&(null==t?void 0:null===(i=t.restrictions)||void 0===i?void 0:i.length)&&g._E.getState().setRestrictions(t.restrictions)}),w(B);let J=B.widget,X=B.profile,x=X.consent||{};d.hi.requestKey=J.request_key,d.hi.propertyId=d.hi.widgetId=J.id,J.settings=J.settings||{},J.settings.single_page_mode=!1,J.languages=J.languages||[],n.v9&&console.log(JSON.parse(JSON.stringify(J)));let U=["has_docs","has_dsar","has_accessibility","has_scripts","display_dpo","display_company"],Y=!1;for(let t=0;t<U.length;t++)"boolean"!=typeof J[U[t]]&&(J[U[t]]=!0);V.accessibility_only&&(U.forEach(t=>J[t]=!1),J.has_accessibility=!0,J.settings.single_page_mode="accessibility"),J.has_docs&&(null===(e=J.policies)||void 0===e?void 0:e.length)?Y=!0:J.has_docs=!1,J.has_scripts&&(Y=!0),J.display_company&&(Y=!0),J.display_dpo&&(null===(a=J.company)||void 0===a?void 0:null===(s=a.representatives)||void 0===s?void 0:s.length)?Y=!0:J.display_dpo=!1,J.has_dsar&&(null===(O=J.settings.data_privacy)||void 0===O?void 0:null===(y=O.requests)||void 0===y?void 0:y.length)>0?Y=!0:J.has_dsar=!1,J.has_accessibility&&(null===(C=J.settings.accessibility)||void 0===C?void 0:C.has_accessibility)?Y=!0:"accessibility"!==J.settings.single_page_mode&&(J.has_accessibility=!1);let j=!1!==J.has_scripts;B.sid&&(0,d.SF)(B.sid),(null===(m=J.settings.data_privacy)||void 0===m?void 0:m.display_privacy_widget)!==!0||(null===(D=J.settings.data_privacy)||void 0===D?void 0:null===(A=D.notice)||void 0===A?void 0:A.type)||(J.settings.notice={type:o.I6.CLASSIC}),n.v9&&console.log("PROPERTY>",B),"production"!==n.SH&&console.log("Clym widget v-".concat(n.q4," booting [build ").concat(n.bS,"]."));let F=X.lang||"EN";if("ASSISTANT"===q){if(F="EN",B.widget.widget_position="left"===B.widget.widget_position?"right":"left",!B.assistant)return console.warn("Clym: AI Assistant is not ready yet"),null;g.AX.getState().setAssistantData(B.assistant),await (0,r.BV)(X,J),B.assistant.widget_icon&&(B.widget.widget_icon=B.assistant.widget_icon),J.is_assistant=!0,await (0,r.MS)(x,J,!1)}if("CHAT"===q){if((J=await (0,h.bv)()).widget_position="left"===J.widget_position?"right":"left",!J.id)return console.warn("Clym: Chat is not ready yet"),null;J.is_chat=!0,V.chat_service_id&&(J.chat_service_id=V.chat_service_id);try{let t=atob(V.api);(0,d.lC)(t)}catch(t){console.error(t)}await (0,r.BV)(X,J),await (0,r.MS)(x,J,!1)}if(g.K0.setState(J),await g.Xi.getState().loadLanguagePack(F,J.id),"WIDGET"===q){if(R||!j||(null===(Z=J.settings.data_privacy)||void 0===Z?void 0:Z.is_gpc_enabled)||function(){let{updateGpcSignal:t}=g.T4.getState();_=!0,t(!1)}(),!R&&j&&(null===(G=J.settings.data_privacy)||void 0===G?void 0:null===(K=G.notice)||void 0===K?void 0:K.type)==="TCF"?(0,u.W0)():(0,u.J8)(),J.languages&&J.languages.length>0){for(let t=0;t<J.languages.length;t++)J.languages[t].url&&delete J.languages[t].url;g.Xi.setState({ts:Date.now(),base_url:J.language_base_url,languages:J.languages})}if(await (0,r.BV)(X,J),await (0,r.MS)(x,J,!1,j?void 0:{has_decision:!0}),g.kV.setState({policies:J.policies||[]}),g.K0.subscribe((t,i)=>{t.policies!==i.policies&&g.kV.setState({policies:t.policies})}),R){let t;let i=t=>i=>{let e={};Object.keys(i).forEach(t=>{"function"!=typeof i[t]&&(e[t]=i[t])}),c.Z.bridge("store.syncState",{ns:t,data:e})};c.Z.bridge("store.getState",{ns:"accessibility"}).then(t=>{g.fi.setState(t||{})}),g.K0.subscribe(i("widget")),g.Oz.subscribe(i("profile")),g.T4.subscribe(i("consent")),g.GQ.subscribe(i("tcf")),g.p7.subscribe(i=>{t!==i.isOpenedWidget&&(c.Z.bridge("store.setComponentVisible",{kind:"widget",is_open:i.isOpenedWidget}),t=i.isOpenedWidget)})}}if(!R&&((null===(N=J.settings.data_privacy)||void 0===N?void 0:N.is_gpp_applied)||(null===(W=J.settings.data_privacy)||void 0===W?void 0:null===(L=W.signal_framework_ids)||void 0===L?void 0:L.length)>0)&&!J.settings.single_page_mode?(0,f.y5)():(0,f.Tv)(),g._E.setState({isChannelConnected:!0,widgetType:q,bootQuery:V,customNoticeType:"true"===V.custom_notice_type,isNative:R}),c.Z.send(l.Z.WIDGET_POSITION_CHANGE,{position:B.widget.widget_position}),"WIDGET"===q){let t=!0,i=B.widget,{toggleBlockWidget:e}=g.p7.getState(),{settings:s}=i;if(i.is_limited?(t=!1,console.warn("Clym: property is limited, will not provide all widget functionality")):(null===(M=s.general)||void 0===M?void 0:M.is_disabled)||s.is_disabled?t=!1:k(null===(P=s.data_privacy)||void 0===P?void 0:P.conditional)?t=!1:Y||(t=!1),J.settings.single_page_mode&&(t=!0),!t&&(n.v9&&console.log("Clym: blocking widget loading"),e(!0),!R))return await (0,r.DO)();j?(b.bA(),R||await (0,r.Vs)()):J.settings.single_page_mode||R||await (0,r.DO)()}return null},I=async()=>{if(v.IO.native)try{return await c.Z.bridge("store.getState")}catch(t){console.warn("Failed to load property data from bridge",t)}if(v.IO.api)try{let t=atob(v.IO.api);(0,d.lC)(t)}catch(t){}let t={channel:c.Z.id,origin:c.Z.origin};return v.IO.country&&(t.country=v.IO.country,v.IO.state&&(t.state=v.IO.state)),"assistant"===v.IO.page&&v.IO.assistant_id&&(t.assistant_id=v.IO.assistant_id),v.IO.accessibility_only&&(t.accessibility_only=v.IO.accessibility_only),await (0,d.K6)("/",t)},C=!1,T=()=>{C||(C=!0,window.CLYM_SCRIPTS_TO_BLOCK=[],window.addEventListener("message",t=>{try{if(t.data){let i=JSON.parse(t.data);"clym_all_scripts_send"===i.type&&(n.v9&&console.log("WIDGET> injectAcceptTags"),window.CLYM_SCRIPTS_TO_BLOCK=i.payload.CLYM_SCRIPTS_TO_BLOCK,(0,r.Vs)()),"clym_all_cookies_send"===i.type&&(window.ALL_COOKIES=i.payload)}}catch(t){}}),window.top.postMessage(JSON.stringify({type:"clym_all_scripts_request"}),"*"),window.top.postMessage(JSON.stringify({type:"clym_all_cookies_request"}),"*"))},m=!1,E=()=>{if(m)return;m=!0,g.K0.subscribe(i=>{var e,a;(null===(a=i.settings)||void 0===a?void 0:null===(e=a.data_privacy)||void 0===e?void 0:e.conditional)&&(s=i.settings.data_privacy.conditional,k()&&t())}),c.Z.on(l.Z.SITE_URL_CHANGE,i=>{i.url&&(a=i.url,g._E.getState().setParentUrl(a),k()&&t())});let t=async()=>{let{toggleBlockWidget:t}=g.p7.getState();t(!0);try{await (0,r.DO)()}catch(t){}}},k=t=>{var i;let e=t||s;if(!(null==e?void 0:e.type)||!(null==e?void 0:null===(i=e.rules)||void 0===i?void 0:i.length)||!a)return;let n=!1,l=a.split("://")[1]||"";l=-1!==l.indexOf("/")?l.substr(l.indexOf("/")):"/";for(let t=0,i=e.rules.length;t<i;t++){let i=e.rules[t];if("string"==typeof i&&i){if(i.startsWith("http://")||i.startsWith("https://")){if(0===a.indexOf(i)){n=!0;break}}else if(0===l.indexOf(i)){n=!0;break}}}let o=!1;return"INCLUDE"!==e.type||n||(o=!0),"EXCLUDE"===e.type&&n&&(o=!0),o}}}]);