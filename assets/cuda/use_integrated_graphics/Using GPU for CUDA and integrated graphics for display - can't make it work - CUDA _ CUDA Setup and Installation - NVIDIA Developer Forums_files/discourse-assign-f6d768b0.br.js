define("discourse/plugins/discourse-assign/discourse/assigned-group-route-map",["exports"],function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={resource:"group",map(){this.route("assigned",function(){this.route("show",{path:"/:filter"})})}}}),define("discourse/plugins/discourse-assign/discourse/assigned-messages-route-map",["exports"],function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={resource:"user.userPrivateMessages",map(){this.route("assigned",function(){this.route("index",{path:"/"})})}}}),define("discourse/plugins/discourse-assign/discourse/assigns-activity-route-map",["exports"],function(s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={resource:"user.userActivity",map(){this.route("assigned")}}}),define("discourse/plugins/discourse-assign/discourse/components/assign-actions-dropdown",["exports","@ember/object","@ember-decorators/component","discourse-i18n","select-kit/components/dropdown-select-box","select-kit/components/select-kit"],function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const r=dt7948.c(class extends n.default{headerIcon=null
allowInitialValueMutation=!1
showFullTitle=!0
computeContent(){let s=[]
return this.assignee&&(s=s.concat([{id:"unassign",icon:this.group?"group-times":"user-xmark",name:(0,i.i18n)("discourse_assign.unassign.title"),description:(0,i.i18n)("discourse_assign.unassign.help",{username:this.assignee})},{id:"reassign",icon:"users",name:(0,i.i18n)("discourse_assign.reassign.title"),description:(0,i.i18n)("discourse_assign.reassign.help")}])),this.topic.indirectly_assigned_to&&Object.entries(this.topic.indirectly_assigned_to).forEach(e=>{const[t,n]=e,o=n.assigned_to
s=s.concat({id:`unassign_post_${t}`,icon:o.username?"user-xmark":"group-times",name:(0,i.i18n)("discourse_assign.unassign_post.title"),description:(0,i.i18n)("discourse_assign.unassign_post.help",{username:o.username||o.name})})}),s}onChange(s){switch(s){case"unassign":this.unassign(this.topic.id)
break
case"reassign":this.reassign(this.topic,this.assignee)}const e=s.match(/unassign_post_(\d+)/)?.[1]
e&&this.unassign(e,"Post")}static{dt7948.n(this.prototype,"onChange",[e.action])}},[(0,t.classNames)("assign-actions-dropdown"),(0,o.selectKitOptions)({icon:null,translatedNone:"...",showFullTitle:!0})])
s.default=r}),define("discourse/plugins/discourse-assign/discourse/components/assign-button",["exports","@glimmer/component","@ember/object","@ember/service","discourse/components/d-button","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static shouldRender(s){return!s.post.firstPost}static hidden(s){return s.post.assigned_to_user?.id!==s.state.currentUser.id}static{dt7948.g(this.prototype,"taskActions",[i.service])}#s=void dt7948.i(this,"taskActions")
get icon(){return this.isAssigned?"user-xmark":"user-plus"}get isAssigned(){return this.args.post.assigned_to_user||this.args.post.assigned_to_group}get title(){return this.isAssigned?"discourse_assign.unassign_post.title":"discourse_assign.assign_post.title"}async acceptAnswer(){if(this.isAssigned){const s=this.args.post
await this.taskActions.unassign(s.id,"Post"),delete s.topic.indirectly_assigned_to[s.id],s.topic.indirectly_assigned_to=s.topic.indirectly_assigned_to}else this.taskActions.showAssignModal(this.args.post,{isAssigned:!1,targetType:"Post"})}static{dt7948.n(this.prototype,"acceptAnswer",[t.action])}static{(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"seoWQ4b+",block:'[[[1,"\\n    "],[8,[32,0],[[16,0,[52,[30,0,["isAssigned"]],"post-action-menu__unassign-post unassign-post","post-action-menu__assign-post assign-post"]],[17,1]],[["@action","@icon","@title"],[[30,0,["acceptAnswer"]],[30,0,["icon"]],[30,0,["title"]]]],null],[1,"\\n  "]],["&attrs"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assign-button.js",scope:()=>[n.default],isStrictMode:!0}),this)}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/components/assign-user-form",["exports","@glimmer/component","@glimmer/tracking","@ember/object","discourse/plugins/discourse-assign/discourse/components/assignment","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static{dt7948.g(this.prototype,"showValidationErrors",[t.tracked],function(){return!1})}#e=void dt7948.i(this,"showValidationErrors")
constructor(){super(...arguments),this.args.formApi.submit=this.assign}get assigneeIsEmpty(){return!this.args.model.username&&!this.args.model.group_name}async assign(){this.assigneeIsEmpty?this.showValidationErrors=!0:await this.args.onSubmit()}static{dt7948.n(this.prototype,"assign",[i.action])}static{(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"DEZrvZWn",block:'[[[1,"\\n    "],[8,[32,0],null,[["@assignment","@onSubmit","@showValidationErrors"],[[30,1],[30,0,["assign"]],[30,0,["showValidationErrors"]]]],null],[1,"\\n  "]],["@model"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assign-user-form.js",scope:()=>[n.default],isStrictMode:!0}),this)}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/components/assigned-to-first-post",["exports","@glimmer/component","@ember/service","@ember/template","discourse/helpers/d-icon","discourse/lib/decorators","discourse-i18n","discourse/plugins/discourse-assign/discourse/lib/url","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class c extends e.default{static{dt7948.g(this.prototype,"siteSettings",[t.service])}#t=void dt7948.i(this,"siteSettings")
get assignedToUser(){return this.args.post?.topic?.assigned_to_user}get assignedToGroup(){return this.args.post?.topic?.assigned_to_group}get icon(){return this.assignedToUser?"user-plus":"group-plus"}get indirectlyAssignedTo(){return this.args.post?.topic?.indirectly_assigned_to}get indirectAssignments(){return this.indirectlyAssignedTo?Object.keys(this.indirectlyAssignedTo).map(s=>{const e=this.indirectlyAssignedTo[s].post_number
return{postId:s,assignee:this.indirectlyAssignedTo[s].assigned_to,postNumber:e,url:`${this.args.post.topic.url}/${e}`}}):null}get isAssigned(){return!!(this.assignedToUser||this.assignedToGroup||this.args.post?.topic?.indirectly_assigned_to)}get hasOnlyIndirectAssignments(){return!this.assignedToUser&&!this.assignedToGroup}prioritizedAssigneeName(s){return(this.siteSettings.prioritize_full_name_in_ux||!s.username)&&s.name||s.username}static{dt7948.n(this.prototype,"prioritizedAssigneeName",[o.bind])}static{(0,u.setComponentTemplate)((0,d.createTemplateFactory)({id:"arPvsMe+",block:'[[[1,"\\n"],[41,[30,0,["isAssigned"]],[[[1,"      "],[10,2],[14,0,"assigned-to"],[12],[1,"\\n        "],[1,[28,[32,0],[[30,0,["icon"]]],null]],[1,"\\n"],[41,[30,0,["assignedToUser"]],[[[1,"          "],[10,1],[14,0,"assignee"],[12],[1,"\\n            "],[10,1],[14,0,"assigned-to--user"],[12],[1,"\\n              "],[1,[28,[32,1],[[28,[32,2],["discourse_assign.assigned_topic_to"],[["username","path"],[[28,[30,0,["prioritizedAssigneeName"]],[[30,0,["assignedToUser"]]],null],[28,[32,3],[[30,0,["assignedToUser"]]],null]]]]],null]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["assignedToGroup"]],[[[1,"          "],[10,1],[14,0,"assignee"],[12],[1,"\\n            "],[10,1],[14,0,"assigned-to--group"],[12],[1,"\\n              "],[1,[28,[32,1],[[28,[32,2],["discourse_assign.assigned_topic_to"],[["username","path"],[[30,0,["assignedToGroup","name"]],[28,[32,4],[[30,0,["assignedToGroup"]]],null]]]]],null]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["hasOnlyIndirectAssignments"]],[[[1,"          "],[10,1],[14,0,"assign-text"],[12],[1,"\\n            "],[1,[28,[32,2],["discourse_assign.assigned"],null]],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[41,[30,0,["indirectlyAssignedTo"]],[[[42,[28,[31,2],[[28,[31,2],[[30,0,["indirectAssignments"]]],null]],null],"postId",[[[1,"            "],[10,1],[14,0,"assignee"],[12],[1,"\\n              "],[10,3],[15,6,[30,1,["url"]]],[14,0,"assigned-indirectly"],[12],[1,"\\n                "],[1,[28,[32,2],["discourse_assign.assign_post_to_multiple"],[["post_number","username"],[[30,1,["postNumber"]],[28,[30,0,["prioritizedAssigneeName"]],[[30,1,["assignee"]]],null]]]]],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[1]],null]],[]],null],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"  "]],["indirectAssignment"],false,["if","each","-track-array"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-to-first-post.js",scope:()=>[n.default,i.htmlSafe,r.i18n,a.assignedToUserPath,a.assignedToGroupPath],isStrictMode:!0}),this)}}s.default=c}),define("discourse/plugins/discourse-assign/discourse/components/assigned-to-post",["exports","@glimmer/component","@ember/object","@ember/service","discourse/components/d-button","discourse/components/dropdown-menu","discourse/helpers/d-icon","discourse-i18n","float-kit/components/d-menu","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d,c){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class l extends e.default{static{dt7948.g(this.prototype,"taskActions",[i.service])}#s=void dt7948.i(this,"taskActions")
static{dt7948.g(this.prototype,"siteSettings",[i.service])}#t=void dt7948.i(this,"siteSettings")
get nameOrUsername(){return this.siteSettings.prioritize_full_name_in_ux&&this.args.assignedToUser.name||this.args.assignedToUser.username}unassign(){this.taskActions.unassignPost(this.args.post)}static{dt7948.n(this.prototype,"unassign",[t.action])}editAssignment(){this.taskActions.showAssignPostModal(this.args.post)}static{dt7948.n(this.prototype,"editAssignment",[t.action])}static{(0,d.setComponentTemplate)((0,c.createTemplateFactory)({id:"35Vrb8pQ",block:'[[[1,"\\n"],[41,[30,1],[[[1,"      "],[1,[28,[32,0],["user-plus"],null]],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[32,0],["group-plus"],null]],[1,"\\n"]],[]]],[1,"\\n    "],[10,1],[14,0,"assign-text"],[12],[1,"\\n      "],[1,[28,[32,1],["discourse_assign.assigned_to"],null]],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,3],[15,6,[30,2]],[14,0,"assigned-to-username"],[12],[1,"\\n"],[41,[30,1],[[[1,"        "],[1,[30,0,["nameOrUsername"]]],[1,"\\n"]],[]],[[[1,"        "],[1,[30,3,["name"]]],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n\\n    "],[8,[32,2],[[24,0,"btn-flat more-button"]],[["@identifier","@icon","@autofocus"],["post-assign-menu","ellipsis",true]],[["default"],[[[[1,"\\n      "],[8,[32,3],null,null,[["default"],[[[[1,"\\n        "],[8,[30,4,["item"]],null,null,[["default"],[[[[1,"\\n          "],[8,[32,4],[[24,0,"btn-transparent unassign-btn"]],[["@action","@icon","@label"],[[30,0,["unassign"]],"user-plus","discourse_assign.unassign.title"]],null],[1,"\\n        "]],[]]]]],[1,"\\n        "],[8,[30,4,["item"]],null,null,[["default"],[[[[1,"\\n          "],[8,[32,4],[[24,0,"btn-transparent edit-assignment-btn"]],[["@action","@icon","@label"],[[30,0,["editAssignment"]],"group-plus","discourse_assign.reassign.title_w_ellipsis"]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[4]]]]],[1,"\\n    "]],[]]]]],[1,"\\n  "]],["@assignedToUser","@href","@assignedToGroup","dropdown"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-to-post.js",scope:()=>[r.default,a.i18n,u.default,o.default,n.default],isStrictMode:!0}),this)}}s.default=l}),define("discourse/plugins/discourse-assign/discourse/components/assigned-to",["exports","discourse/helpers/avatar","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const o=(0,t.setComponentTemplate)((0,i.createTemplateFactory)({id:"5ZGI53CT",block:'[[[1,"\\n  "],[10,0],[14,0,"assigned-to-user"],[12],[1,"\\n    "],[1,[28,[32,0],[[30,1]],[["imageSize"],["small"]]]],[1,"\\n\\n    "],[10,1],[14,0,"assigned-username"],[12],[1,"\\n      "],[1,[30,1,["username"]]],[1,"\\n    "],[13],[1,"\\n\\n    "],[18,2,null],[1,"\\n  "],[13],[1,"\\n"]],["@user","&default"],false,["yield"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-to.js",scope:()=>[e.default],isStrictMode:!0}),(0,n.default)(void 0,"assigned-to:AssignedTo"))
s.default=o}),define("discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-column",["exports","@glimmer/component","@ember/object","@ember/service","discourse/plugins/discourse-assign/discourse/components/assign-actions-dropdown","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static{dt7948.g(this.prototype,"taskActions",[i.service])}#s=void dt7948.i(this,"taskActions")
static{dt7948.g(this.prototype,"router",[i.service])}#i=void dt7948.i(this,"router")
async unassign(s,e="Topic"){await this.taskActions.unassign(s,e),this.router.refresh()}static{dt7948.n(this.prototype,"unassign",[t.action])}reassign(s){this.taskActions.showAssignModal(s,{onSuccess:()=>this.router.refresh()})}static{dt7948.n(this.prototype,"reassign",[t.action])}static{(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"CgiPEHvE",block:'[[[1,"\\n"],[41,[30,1,["assigned_to_user"]],[[[1,"      "],[8,[32,0],null,[["@topic","@assignee","@unassign","@reassign"],[[30,1],[30,1,["assigned_to_user","username"]],[30,0,["unassign"]],[30,0,["reassign"]]]],null],[1,"\\n"]],[]],[[[41,[30,1,["assigned_to_group"]],[[[1,"      "],[8,[32,0],null,[["@topic","@assignee","@group","@unassign","@reassign"],[[30,1],[30,1,["assigned_to_group","name"]],true,[30,0,["unassign"]],[30,0,["reassign"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[8,[32,0],null,[["@topic","@unassign"],[[30,1],[30,0,["unassign"]]]],null],[1,"\\n    "]],[]]]],[]]],[1,"  "]],["@topic"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-column.js",scope:()=>[n.default],isStrictMode:!0}),this)}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/components/assignee-chooser-row",["exports","truth-helpers","discourse/components/user-status-message","discourse/helpers/avatar","discourse/helpers/d-icon","discourse/helpers/decorate-username-selector","discourse/helpers/format-username","select-kit/components/email-group-user-chooser-row","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class c extends a.default{static{(0,u.setComponentTemplate)((0,d.createTemplateFactory)({id:"PeqiP3Rv",block:'[[[1,"\\n"],[41,[30,0,["item","isUser"]],[[[1,"      "],[1,[28,[32,0],[[30,0,["item"]]],[["imageSize"],["tiny"]]]],[1,"\\n      "],[10,0],[14,0,"user-wrapper"],[12],[1,"\\n        "],[10,1],[14,0,"identifier"],[12],[1,[28,[32,1],[[30,0,["item","id"]]],null]],[13],[1,"\\n        "],[10,1],[14,0,"name"],[12],[1,[30,0,["item","name"]]],[13],[1,"\\n"],[41,[28,[32,2],[[30,0,["item","showUserStatus"]],[30,0,["item","status"]]],null],[[[1,"          "],[8,[32,3],null,[["@status","@showDescription"],[[30,0,["item","status"]],true]],null],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n      "],[1,[28,[32,4],[[30,0,["item","id"]]],null]],[1,"\\n"]],[]],[[[41,[30,0,["item","isGroup"]],[[[1,"      "],[1,[28,[32,5],["users"],null]],[1,"\\n      "],[10,0],[14,0,"user-wrapper"],[12],[1,"\\n        "],[10,1],[14,0,"identifier"],[12],[1,[30,0,["item","id"]]],[13],[1,"\\n        "],[10,1],[14,0,"name"],[12],[1,[30,0,["item","full_name"]]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[32,5],["envelope"],null]],[1,"\\n      "],[10,1],[14,0,"identifier"],[12],[1,[30,0,["item","id"]]],[13],[1,"\\n    "]],[]]]],[]]],[1,"  "]],[],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assignee-chooser-row.js",scope:()=>[i.default,r.default,e.and,t.default,o.default,n.default],isStrictMode:!0}),this)}}s.default=c}),define("discourse/plugins/discourse-assign/discourse/components/assignee-chooser",["exports","select-kit/components/email-group-user-chooser"],function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class t extends e.default{modifyComponentForRow(){return"assignee-chooser-row"}}s.default=t}),define("discourse/plugins/discourse-assign/discourse/components/assignment",["exports","@glimmer/component","@ember/helper","@ember/legacy-built-in-components","@ember/modifier","@ember/object","@ember/service","truth-helpers","discourse/helpers/d-icon","discourse-i18n","select-kit/components/combo-box","discourse/plugins/discourse-assign/discourse/components/assignee-chooser","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d,c,l,p,g){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class m extends e.default{static{dt7948.g(this.prototype,"siteSettings",[r.service])}#t=void dt7948.i(this,"siteSettings")
static{dt7948.g(this.prototype,"taskActions",[r.service])}#s=void dt7948.i(this,"taskActions")
get assignee(){return this.args.assignment.username||this.args.assignment.group_name}get status(){return this.args.assignment.status||this.assignStatuses[0]}get assignStatuses(){return this.siteSettings.assign_statuses.split("|").filter(Boolean)}get assignStatusOptions(){return this.assignStatuses.map(s=>({id:s,name:s}))}get assigneeIsEmpty(){return!this.args.assignment.username&&!this.args.assignment.group_name}get showAssigneeIeEmptyError(){return this.assigneeIsEmpty&&this.args.showValidationErrors}handleTextAreaKeydown(s){(s.ctrlKey||s.metaKey)&&"Enter"===s.key&&this.args.onSubmit()}static{dt7948.n(this.prototype,"handleTextAreaKeydown",[o.action])}markAsEdited(){this.args.assignment.isEdited=!0}static{dt7948.n(this.prototype,"markAsEdited",[o.action])}setAssignee([s]){this.taskActions.allowedGroupsForAssignment.includes(s)?(this.args.assignment.username=null,this.args.assignment.group_name=s):(this.args.assignment.username=s,this.args.assignment.group_name=null),this.markAsEdited()}static{dt7948.n(this.prototype,"setAssignee",[o.action])}setStatus(s){this.args.assignment.status=s,this.markAsEdited()}static{dt7948.n(this.prototype,"setStatus",[o.action])}static{(0,p.setComponentTemplate)((0,g.createTemplateFactory)({id:"QX4ROyyD",block:'[[[1,"\\n    "],[10,0],[15,0,[29,["control-group\\n        ",[52,[30,0,["showAssigneeIeEmptyError"]],"assignee-error"]]]],[12],[1,"\\n      "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.assignee_label"],null]],[13],[1,"\\n      "],[8,[32,1],[[24,"autocomplete","off"]],[["@id","@value","@onChange","@showUserStatus","@options"],["assignee-chooser",[30,0,["assignee"]],[30,0,["setAssignee"]],true,[28,[32,2],null,[["mobilePlacementStrategy","includeGroups","customSearchOptions","groupMembersOf","maximum","tabindex","expandedOnInsert","caretUpIcon","caretDownIcon"],["absolute",true,[28,[32,2],null,[["assignableGroups","defaultSearchResults"],[true,[30,0,["taskActions","suggestions"]]]]],[30,0,["taskActions","allowedGroups"]],1,1,[28,[32,3],[[30,0,["assignee"]]],null],"magnifying-glass","magnifying-glass"]]]]],null],[1,"\\n\\n"],[41,[30,0,["showAssigneeIeEmptyError"]],[[[1,"        "],[10,1],[14,0,"error-label"],[12],[1,"\\n          "],[1,[28,[32,4],["triangle-exclamation"],null]],[1,"\\n          "],[1,[28,[32,0],["discourse_assign.assign_modal.choose_assignee"],null]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n\\n"],[41,[30,0,["siteSettings","enable_assign_status"]],[[[1,"      "],[10,0],[14,0,"control-group assign-status"],[12],[1,"\\n        "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.status_label"],null]],[13],[1,"\\n        "],[8,[32,5],null,[["@id","@content","@value","@onChange"],["assign-status",[30,0,["assignStatusOptions"]],[30,0,["status"]],[30,0,["setStatus"]]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[10,0],[14,0,"control-group assign-status"],[12],[1,"\\n      "],[10,"label"],[12],[1,"\\n        "],[1,[28,[32,0],["discourse_assign.assign_modal.note_label"],null]],[1," "],[10,1],[14,0,"label-optional"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.optional_label"],null]],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[8,[32,6],[[24,1,"assign-modal-note"],[4,[32,7],["keydown",[30,0,["handleTextAreaKeydown"]]],null],[4,[32,7],["input",[30,0,["markAsEdited"]]],null]],[["@value"],[[30,1,["note"]]]],null],[1,"    "],[13],[1,"\\n  "]],["@assignment"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/assignment.js",scope:()=>[d.i18n,l.default,t.hash,a.not,u.default,c.default,i.TextArea,n.on],isStrictMode:!0}),this)}}s.default=m}),define("discourse/plugins/discourse-assign/discourse/components/bulk-actions/assign-user",["exports","@glimmer/component","@ember/object","@ember-compat/tracked-built-ins","discourse/components/d-button","discourse/plugins/discourse-assign/discourse/components/assign-user-form","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class u extends e.default{model=new i.TrackedObject({})
formApi={submit(){}}
async assign(){return this.args.performAndRefresh({type:"assign",username:this.model.username,status:this.model.status,note:this.model.note})}static{dt7948.n(this.prototype,"assign",[t.action])}static{(0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"wuj1k7uP",block:'[[[1,"\\n    "],[10,0],[12],[1,"\\n      "],[8,[32,0],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["assign"]],[30,0,["formApi"]]]],null],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[12],[1,"\\n      "],[8,[32,1],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["formApi","submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n    "],[13],[1,"\\n  "]],[],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/bulk-actions/assign-user.js",scope:()=>[o.default,n.default],isStrictMode:!0}),this)}}s.default=u}),define("discourse/plugins/discourse-assign/discourse/components/bulk-actions/bulk-assign-user",["exports","@glimmer/component","@ember/object","@ember/render-modifiers/modifiers/did-insert","@ember-compat/tracked-built-ins","discourse/plugins/discourse-assign/discourse/components/assign-user-form","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class u extends e.default{model=new n.TrackedObject({})
formApi={submit(){}}
async assign(s){return s({type:"assign",username:this.model.username,status:this.model.status,note:this.model.note})}static{dt7948.n(this.prototype,"assign",[t.action])}performRegistration(){this.args.onRegisterAction?.(this.assign.bind(this))}static{dt7948.n(this.prototype,"performRegistration",[t.action])}static{(0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"JVQmYH9x",block:'[[[1,"\\n    "],[11,1],[4,[32,0],[[30,0,["performRegistration"]]],null],[12],[13],[1,"\\n    "],[8,[32,1],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["assign"]],[30,0,["formApi"]]]],null],[1,"\\n  "]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/bulk-actions/bulk-assign-user.js",scope:()=>[i.default,o.default],isStrictMode:!0}),this)}}s.default=u}),define("discourse/plugins/discourse-assign/discourse/components/flagged-topic-listener",["exports","@ember/component","@ember/object"],function(s,e,t){"use strict"
function i(s,e){s&&s.id===e.topic_id&&(0,t.set)(s,"assigned_to_user",e.assigned_to)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class n extends e.default{didInsertElement(){super.didInsertElement(...arguments),this.messageBus.subscribe("/staff/topic-assignment",s=>{this.flaggedTopics?this.flaggedTopics.forEach(e=>i(e.topic,s)):i(this.topic,s)})}willDestroyElement(){super.willDestroyElement(...arguments),this.messageBus.unsubscribe("/staff/topic-assignment")}}s.default=n}),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-filter",["exports","@ember/helper","@ember/routing","discourse/helpers/avatar","discourse/helpers/d-icon","discourse/helpers/format-username","discourse-i18n","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r,a,u,d){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const c=(0,a.setComponentTemplate)((0,u.createTemplateFactory)({id:"viY8p+Yb",block:'[[[1,"\\n  "],[10,"li"],[12],[1,"\\n"],[41,[30,1],[[[1,"      "],[8,[32,0],null,[["@route","@model","@query"],["group.assigned.show",[30,2,["username_lower"]],[28,[32,1],null,[["order","ascending","search"],[[30,3],[30,4],[30,5]]]]]],[["default"],[[[[1,"\\n        "],[10,0],[14,0,"assign-image"],[12],[1,"\\n          "],[10,3],[15,6,[30,2,["userPath"]]],[15,"data-user-card",[30,2,["username"]]],[12],[1,[28,[32,2],[[30,0,["filter"]]],[["imageSize"],["large"]]]],[13],[1,"\\n        "],[13],[1,"\\n\\n        "],[10,0],[14,0,"assign-names"],[12],[1,"\\n          "],[10,0],[14,0,"assign-username"],[12],[1,[28,[32,3],[[30,2,["username"]]],null]],[13],[1,"\\n          "],[10,0],[14,0,"assign-name"],[12],[1,[30,2,["name"]]],[13],[1,"\\n        "],[13],[1,"\\n\\n        "],[10,0],[14,0,"assign-count"],[12],[1,"\\n          "],[1,[30,2,["assignments_count"]]],[1,"\\n        "],[13],[1,"\\n      "]],[]]]]],[1,"\\n"]],[]],[[[41,[30,6],[[[1,"      "],[8,[32,0],null,[["@route","@model","@query"],["group.assigned.show",[30,2],[28,[32,1],null,[["order","ascending","search"],[[30,3],[30,4],[30,5]]]]]],[["default"],[[[[1,"\\n        "],[10,0],[14,0,"assign-image"],[12],[1,"\\n          "],[1,[28,[32,4],["group-plus"],null]],[1,"\\n        "],[13],[1,"\\n        "],[10,0],[14,0,"assign-names"],[12],[1,"\\n          "],[10,0],[14,0,"assign-username"],[12],[1,[30,6]],[13],[1,"\\n        "],[13],[1,"\\n\\n        "],[10,0],[14,0,"assign-count"],[12],[1,"\\n          "],[1,[30,7]],[1,"\\n        "],[13],[1,"\\n      "]],[]]]]],[1,"\\n"]],[]],[[[1,"      "],[8,[32,0],null,[["@route","@model","@query"],["group.assigned.show",[30,2],[28,[32,1],null,[["order","ascending","search"],[[30,3],[30,4],[30,5]]]]]],[["default"],[[[[1,"\\n        "],[10,0],[14,0,"assign-everyone"],[12],[1,"\\n          "],[1,[28,[32,5],["discourse_assign.group_everyone"],null]],[1,"\\n        "],[13],[1,"\\n        "],[10,0],[14,0,"assign-count"],[12],[1,"\\n          "],[1,[30,7]],[1,"\\n        "],[13],[1,"\\n      "]],[]]]]],[1,"\\n    "]],[]]]],[]]],[1,"  "],[13],[1,"\\n"]],["@showAvatar","@filter","@order","@ascending","@search","@groupName","@assignmentCount"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/group-assigned-filter.js",scope:()=>[t.LinkTo,e.hash,i.default,o.default,n.default,r.i18n],isStrictMode:!0}),(0,d.default)(void 0,"group-assigned-filter:GroupAssignedFilter"))
s.default=c}),define("discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item",["exports","@ember/routing","discourse/helpers/d-icon","discourse-i18n","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const a=(0,n.setComponentTemplate)((0,o.createTemplateFactory)({id:"QCPuen/i",block:'[[[1,"\\n  "],[8,[32,0],null,[["@route"],["group.assigned"]],[["default"],[[[[1,"\\n    "],[1,[28,[32,1],["group-plus"],[["class"],["glyph"]]]],[1,[28,[32,2],["discourse_assign.assigned"],null]],[1,"\\n    ("],[1,[30,1,["assignment_count"]]],[1,")\\n  "]],[]]]]],[1,"\\n"]],["@group"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item.js",scope:()=>[e.LinkTo,t.default,i.i18n],isStrictMode:!0}),(0,r.default)(void 0,"group-assigned-menu-item:GroupAssignedMenuItem"))
s.default=a}),define("discourse/plugins/discourse-assign/discourse/components/modal/assign-user",["exports","@glimmer/component","@ember/object","@ember/service","@ember-compat/tracked-built-ins","discourse/components/d-button","discourse/components/d-modal","discourse/components/d-modal-cancel","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/assign-user-form","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d,c,l){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class p extends e.default{static{dt7948.g(this.prototype,"taskActions",[i.service])}#s=void dt7948.i(this,"taskActions")
model=new n.TrackedObject(this.args.model)
formApi={submit(){}}
get title(){let s
switch(this.model.targetType){case"Post":s="_post_modal"
break
case"Topic":s="_modal"}return(0,u.i18n)(`discourse_assign.assign${s}.${this.model.reassign?"reassign_title":"title"}`)}async onSubmit(){this.args.closeModal(),await this.taskActions.assign(this.model)}static{dt7948.n(this.prototype,"onSubmit",[t.action])}static{(0,c.setComponentTemplate)((0,l.createTemplateFactory)({id:"F1xCinhA",block:'[[[1,"\\n    "],[8,[32,0],[[24,0,"assign"]],[["@title","@closeModal"],[[30,0,["title"]],[30,1]]],[["body","footer"],[[[[1,"\\n        "],[8,[32,1],null,[["@model","@onSubmit","@formApi"],[[30,0,["model"]],[30,0,["onSubmit"]],[30,0,["formApi"]]]],null],[1,"\\n      "]],[]],[[[1,"\\n        "],[8,[32,2],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["formApi","submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n\\n        "],[8,[32,3],null,[["@close"],[[30,1]]],null],[1,"\\n      "]],[]]]]],[1,"\\n  "]],["@closeModal"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/modal/assign-user.js",scope:()=>[r.default,d.default,o.default,a.default],isStrictMode:!0}),this)}}s.default=p}),define("discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments",["exports","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","discourse/components/d-button","discourse/components/d-modal","discourse/components/d-modal-cancel","discourse/lib/ajax-error","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/topic-assignments","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d,c,l,p){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class g extends e.default{static{dt7948.g(this.prototype,"taskActions",[n.service])}#s=void dt7948.i(this,"taskActions")
static{dt7948.g(this.prototype,"assignments",[t.tracked],function(){return this.topic.assignments()})}#n=void dt7948.i(this,"assignments")
get title(){return this.topic.isAssigned()||this.topic.hasAssignedPosts()?(0,d.i18n)("edit_assignments_modal.title"):(0,d.i18n)("discourse_assign.assign_modal.title")}get topic(){return this.args.model.topic}async submit(){this.args.closeModal()
try{await this.#o()}catch(s){(0,u.popupAjaxError)(s)}}static{dt7948.n(this.prototype,"submit",[i.action])}async#o(){for(const s of this.assignments)s.isEdited&&await this.taskActions.putAssignment(s)}static{(0,l.setComponentTemplate)((0,p.createTemplateFactory)({id:"hy5lowUx",block:'[[[1,"\\n    "],[8,[32,0],[[24,0,"assign"]],[["@title","@closeModal"],[[30,0,["title"]],[30,1]]],[["body","footer"],[[[[1,"\\n        "],[8,[32,1],null,[["@assignments","@onSubmit"],[[30,0,["assignments"]],[30,0,["submit"]]]],null],[1,"\\n      "]],[]],[[[1,"\\n        "],[8,[32,2],[[24,0,"btn-primary"]],[["@action","@label"],[[30,0,["submit"]],[52,[30,0,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n\\n        "],[8,[32,3],null,[["@close"],[[30,1]]],null],[1,"\\n      "]],[]]]]],[1,"\\n  "]],["@closeModal"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments.js",scope:()=>[r.default,c.default,o.default,a.default],isStrictMode:!0}),this)}}s.default=g}),define("discourse/plugins/discourse-assign/discourse/components/post-assignments-display",["exports","@glimmer/component","discourse/plugins/discourse-assign/discourse/lib/url","discourse/plugins/discourse-assign/discourse/components/assigned-to-first-post","discourse/plugins/discourse-assign/discourse/components/assigned-to-post","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{static shouldRender(s){return s.post}get post(){return this.args.outletArgs.post}get assignedTo(){return this.post.topic?.indirectly_assigned_to?.[this.post.id]?.assigned_to}get assignedToUser(){return this.assignedTo.username?this.assignedTo:null}get assignedToGroup(){return!this.assignedToUser&&this.assignedTo.name?this.assignedTo:null}get assignedHref(){return this.assignedToUser?(0,t.assignedToUserPath)(this.assignedToUser):(0,t.assignedToGroupPath)(this.assignedToGroup)}static{(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"/Afg82Zl",block:'[[[1,"\\n"],[41,[30,0,["post","firstPost"]],[[[1,"      "],[8,[32,0],null,[["@post"],[[30,0,["post"]]]],null],[1,"\\n"]],[]],[[[41,[30,0,["assignedTo"]],[[[1,"      "],[10,2],[14,0,"assigned-to"],[12],[1,"\\n        "],[8,[32,1],null,[["@assignedToUser","@assignedToGroup","@href","@post"],[[30,0,["assignedToUser"]],[30,0,["assignedToGroup"]],[30,0,["assignedHref"]],[30,0,["post"]]]],null],[1,"\\n      "],[13],[1,"\\n    "]],[]],null]],[]]],[1,"  "]],[],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/post-assignments-display.js",scope:()=>[i.default,n.default],isStrictMode:!0}),this)}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency",["exports","@ember/component","@ember/helper","discourse/lib/decorators","discourse-i18n","select-kit/components/combo-box","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{selectedFrequency(s,e){return this.availableFrequencies.map(s=>s.value).includes(s)?s:e}static{dt7948.n(this.prototype,"selectedFrequency",[(0,i.default)("user.custom_fields.remind_assigns_frequency","siteSettings.remind_assigns_frequency")])}availableFrequencies(s){return s.map(s=>({name:(0,n.i18n)(s.name),value:s.value,selected:!1}))}static{dt7948.n(this.prototype,"availableFrequencies",[(0,i.default)("user.reminders_frequency")])}static{(0,e.setComponentTemplate)((0,r.createTemplateFactory)({id:"7B25C91m",block:'[[[1,"\\n"],[41,[30,0,["siteSettings","assign_enabled"]],[[[1,"      "],[10,0],[14,0,"controls controls-dropdown"],[12],[1,"\\n        "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.reminders_frequency.description"],null]],[13],[1,"\\n        "],[8,[32,1],null,[["@id","@valueProperty","@content","@value","@onChange"],["remind-assigns-frequency","value",[30,0,["availableFrequencies"]],[30,0,["selectedFrequency"]],[28,[32,2],[[28,[31,1],[[30,0,["user","custom_fields","remind_assigns_frequency"]]],null]],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "]],[],false,["if","mut"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency.js",scope:()=>[n.i18n,o.default,t.fn],isStrictMode:!0}),this)}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/components/topic-assignments",["exports","@glimmer/component","@glimmer/tracking","@ember/object","discourse-i18n","select-kit/components/combo-box","discourse/plugins/discourse-assign/discourse/components/assignment","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class d extends e.default{static{dt7948.g(this.prototype,"selectedAssignment",[t.tracked],function(){return this.args.assignments.find(s=>0===s.id)})}#r=void dt7948.i(this,"selectedAssignment")
get assignmentOptions(){return this.args.assignments.map(s=>this.#a(s))}selectAssignment(s){this.selectedAssignment=this.args.assignments.find(e=>e.id===s)}static{dt7948.n(this.prototype,"selectAssignment",[i.action])}#a(s){const e={id:s.id}
return"Topic"===s.targetType?e.name=(0,n.i18n)("edit_assignments_modal.topic"):e.name=`${(0,n.i18n)("edit_assignments_modal.post")} #${s.postNumber}`,e}static{(0,a.setComponentTemplate)((0,u.createTemplateFactory)({id:"q8K6z1Hy",block:'[[[1,"\\n    "],[10,0],[14,0,"control-group target"],[12],[1,"\\n      "],[10,"label"],[12],[1,[28,[32,0],["discourse_assign.assign_modal.assignment_label"],null]],[13],[1,"\\n      "],[8,[32,1],null,[["@value","@content","@onChange"],[[30,0,["selectedAssignment","id"]],[30,0,["assignmentOptions"]],[30,0,["selectAssignment"]]]],null],[1,"\\n    "],[13],[1,"\\n    "],[8,[32,2],null,[["@assignment","@onSubmit","@showValidationErrors"],[[30,0,["selectedAssignment"]],[30,1],false]],null],[1,"\\n  "]],["@onSubmit"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/topic-assignments.js",scope:()=>[n.i18n,o.default,r.default],isStrictMode:!0}),this)}}s.default=d}),define("discourse/plugins/discourse-assign/discourse/components/topic-level-assign-menu",["exports","@ember/owner","@ember/template","discourse/helpers/user-avatar","discourse/lib/icon-library","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={id:"reassign",dependentKeys:["topic.assigned_to_user","topic.assigned_to_group","currentUser.can_assign","topic.assigned_to_user.username"],classNames:["reassign"],async action(s){if(!this.currentUser?.can_assign)return
const t=(0,e.getOwner)(this).lookup("service:task-actions"),i=(0,e.getOwner)(this).lookup("service:modal"),n=this.topic.postStream.firstPostId
switch(s){case"unassign":this.topic.assigned_to_user=null,this.topic.assigned_to_group=null,await t.unassign(this.topic.id),this.appEvents.trigger("post-stream:refresh",{id:n})
break
case"reassign-self":this.topic.assigned_to_user=null,this.topic.assigned_to_group=null,await t.reassignUserToTopic(this.currentUser,this.topic),this.appEvents.trigger("post-stream:refresh",{id:n})
break
case"reassign":await i.show(r.default,{model:{topic:this.topic},onSuccess:()=>this.appEvents.trigger("post-stream:refresh",{id:n})})
break
default:if(s.startsWith("unassign-from-post-")){const e=function(s){const e=s.lastIndexOf("-")+1
return s.substring(e)}(s)
await t.unassign(e,"Post"),delete this.topic.indirectly_assigned_to[e],this.topic.indirectly_assigned_to=this.topic.indirectly_assigned_to,this.appEvents.trigger("post-stream:refresh",{id:n})}}},noneItem(){return function(s){const e=function(s){const e=s.filter(s=>s.username)
let t=""
1===e.length?t=a(e[0],"tiny"):e.length>1&&(t=a(e[0],"tiny","overlap")+a(e[1],"tiny"))
return t}(s),i=`<span class="unassign-label">${(0,o.i18n)("discourse_assign.topic_level_menu.unassign_with_ellipsis")}</span>`
return{id:null,name:(0,t.htmlSafe)((0,o.i18n)("discourse_assign.topic_level_menu.unassign_with_ellipsis")),label:(0,t.htmlSafe)(`${e}${i}`)}}(this.topic.uniqueAssignees())},content(){const s=[]
return this.topic.isAssigned()&&s.push(function(s,e){let i=s.assigned_to_user?.username||s.assigned_to_group?.name
s.assigned_to_user&&e&&(i=s.assigned_to_user?.name||s.assigned_to_user?.username)
const r=s.assigned_to_user?a(s.assigned_to_user,"small"):(0,n.iconHTML)("user-xmark"),u=(0,o.i18n)("discourse_assign.topic_level_menu.unassign_from_topic",{username:i})
return{id:"unassign",name:(0,t.htmlSafe)(u),label:(0,t.htmlSafe)(`${r} ${u}`)}}(this.topic,this.siteSettings.prioritize_full_name_in_ux)),this.topic.hasAssignedPosts()&&s.push(...function(s){if(!s.hasAssignedPosts())return[]
const e=10
return Object.entries(s.indirectly_assigned_to).slice(0,e).map(([s,e])=>function(s,e){let i,r
const u=!!e.assigned_to.username
u?(i=e.assigned_to.username,r=a(e.assigned_to,"small")):(i=e.assigned_to.name,r=(0,n.iconHTML)("group-times"))
const d=(0,o.i18n)("discourse_assign.topic_level_menu.unassign_from_post",{assignee:i,post_number:e.post_number}),c=(0,o.i18n)("discourse_assign.topic_level_menu.unassign_from_post_help",{assignee:i,post_number:e.post_number})
return{id:`unassign-from-post-${s}`,name:(0,t.htmlSafe)(c),label:(0,t.htmlSafe)(`${r} ${d}`)}}(s,e))}(this.topic)),this.topic.isAssigned()&&!this.topic.isAssignedTo(this.currentUser)&&s.push(function(){const s=(0,n.iconHTML)("user-plus"),e=(0,o.i18n)("discourse_assign.topic_level_menu.reassign_topic_to_me")
return{id:"reassign-self",name:(0,t.htmlSafe)(e),label:(0,t.htmlSafe)(`${s} ${e}`)}}()),s.push(function(){const s=(0,n.iconHTML)("pencil"),e=(0,o.i18n)("discourse_assign.topic_level_menu.edit_assignments")
return{id:"reassign",name:(0,t.htmlSafe)(e),label:(0,t.htmlSafe)(`${s} ${e}`)}}()),s},displayed(){return this.currentUser?.can_assign&&!this.site.mobileView&&(this.topic.isAssigned()||this.topic.hasAssignedPosts())}}
function a(s,e,t){return(0,i.renderAvatar)(s,{imageSize:e,extraClasses:t,ignoreTitle:!0})}}),define("discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list-empty-state",["exports","@ember/template","discourse/helpers/d-icon","discourse/lib/get-url","discourse-i18n","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const u=(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"7f+eCKws",block:'[[[1,"\\n  "],[10,0],[14,0,"empty-state"],[12],[1,"\\n    "],[10,1],[14,0,"empty-state-title"],[12],[1,"\\n      "],[1,[28,[32,0],["user.no_assignments_title"],null]],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"empty-state-body"],[12],[1,"\\n      "],[10,2],[12],[1,"\\n        "],[1,[28,[32,1],[[28,[32,0],["user.no_assignments_body"],[["icon","preferencesUrl"],[[28,[32,2],["user-plus"],null],[28,[32,3],["/my/preferences/notifications"],null]]]]],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list-empty-state.js",scope:()=>[n.i18n,e.htmlSafe,t.default,i.default],isStrictMode:!0}),(0,a.default)(void 0,"assigns-list-empty-state:AssignsListEmptyState"))
s.default=u}),define("discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list",["exports","@ember/object","@ember/object/computed","discourse/components/user-menu/notifications-list","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list-empty-state"],function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class r extends i.default{get dismissTypes(){return this.filterByTypes}get showDismiss(){return this._unreadAssignedNotificationsCount>0}get dismissTitle(){return(0,n.i18n)("user.dismiss_assigned_tooltip")}get showAllHref(){return`${this.currentUser.path}/activity/assigned`}get showAllTitle(){return(0,n.i18n)("user_menu.view_all_assigned")}get itemsCacheKey(){return"user-menu-assigns-tab"}get emptyStateComponent(){return o.default}get alwaysRenderDismissConfirmation(){return!0}get _unreadAssignedNotificationsCount(){const s=`grouped_unread_notifications.${this.site.notification_types.assigned}`
return this.currentUser.get(s)||0}get dismissConfirmationText(){return(0,n.i18n)("notifications.dismiss_confirmation.body.assigns",{count:this._unreadAssignedNotificationsCount})}async fetchItems(){return new a(await super.fetchItems()).sortedItems}}s.default=r
class a{itemsSorting=["notification.read","notification.data.message:desc","notification.created_at:desc"]
static{dt7948.g(this.prototype,"sortedItems",[(0,t.sort)("items","itemsSorting")])}#u=void dt7948.i(this,"sortedItems")
constructor(s){(0,e.set)(this,"items",s)}}}),define("discourse/plugins/discourse-assign/discourse/connectors/above-review-filters/assigned-to-filter",["exports","@ember/component","@ember/helper","@ember/object","@ember/service","@ember-decorators/component","discourse-i18n","select-kit/components/email-group-user-chooser","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const d=dt7948.c(class extends e.default{static shouldRender(s){return s.additionalFilters}static{dt7948.g(this.prototype,"site",[n.service])}#d=void dt7948.i(this,"site")
static{dt7948.g(this.prototype,"siteSettings",[n.service])}#t=void dt7948.i(this,"siteSettings")
groupIDs=(this.siteSettings.assign_allowed_on_groups||"").split("|").filter(Boolean)
allowedGroups=this.site.groups.filter(s=>this.groupIDs.includes(s.id.toString())).mapBy("name")
updateAssignedTo(s){this.set("outletArgs.additionalFilters.assigned_to",s.firstObject)}static{dt7948.n(this.prototype,"updateAssignedTo",[i.action])}static{(0,e.setComponentTemplate)((0,u.createTemplateFactory)({id:"U7dM4DOT",block:'[[[1,"\\n    "],[10,0],[14,0,"reviewable-filter discourse-assign-assign-to-filter"],[12],[1,"\\n      "],[10,"label"],[14,0,"filter-label"],[12],[1,[28,[32,0],["discourse_assign.assigned_to"],null]],[13],[1,"\\n\\n      "],[8,[32,1],[[24,"autocomplete","off"]],[["@value","@onChange","@options"],[[30,0,["outletArgs","additionalFilters","assigned_to"]],[30,0,["updateAssignedTo"]],[28,[32,2],null,[["maximum","fullWidthWrap","includeGroups","groupMembersOf"],[1,true,false,[30,0,["allowedGroups"]]]]]]],null],[1,"\\n    "],[13],[1,"\\n  "]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/above-review-filters/assigned-to-filter.js",scope:()=>[r.i18n,a.default,t.hash],isStrictMode:!0}),this)}},[(0,o.classNames)("assigned-to-filter")])
s.default=d}),define("discourse/plugins/discourse-assign/discourse/connectors/advanced-search-options-below/assigned-advanced-search",["exports","@ember/component","@ember/helper","@ember/object","@ember/service","@ember-decorators/component","discourse-i18n","select-kit/components/email-group-user-chooser","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const d=dt7948.c(class extends e.default{static shouldRender(s,e){return e.currentUser?.can_assign}static{dt7948.g(this.prototype,"currentUser",[n.service])}#c=void dt7948.i(this,"currentUser")
onChangeAssigned(s){this.outletArgs.onChangeSearchedTermField("assigned","updateSearchTermForAssignedUsername",s)}static{dt7948.n(this.prototype,"onChangeAssigned",[i.action])}static{(0,e.setComponentTemplate)((0,u.createTemplateFactory)({id:"i/zaVNv3",block:'[[[1,"\\n    "],[10,0],[14,0,"control-group"],[12],[1,"\\n      "],[10,"label"],[14,0,"control-label"],[14,"for","search-assigned-to"],[12],[1,"\\n        "],[1,[28,[32,0],["search.advanced.assigned.label"],null]],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"controls"],[12],[1,"\\n        "],[8,[32,1],null,[["@value","@onChange","@options"],[[30,0,["outletArgs","searchedTerms","assigned"]],[30,0,["onChangeAssigned"]],[28,[32,2],null,[["maximum","excludeCurrentUser","includeGroups","customSearchOptions"],[1,false,true,[28,[32,2],null,[["assignableGroups"],[true]]]]]]]],null],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/advanced-search-options-below/assigned-advanced-search.js",scope:()=>[r.i18n,a.default,t.hash],isStrictMode:!0}),this)}},[(0,o.classNames)("assigned-advanced-search")])
s.default=d}),define("discourse/plugins/discourse-assign/discourse/connectors/category-custom-settings/assign-settings",["exports","@ember/component","@ember/modifier","@ember/object","@ember-decorators/component","discourse-i18n","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const a=dt7948.c(class extends e.default{onChangeSetting(s){this.set("outletArgs.category.custom_fields.enable_unassigned_filter",s.target.checked?"true":"false")}static{dt7948.n(this.prototype,"onChangeSetting",[i.action])}static{(0,e.setComponentTemplate)((0,r.createTemplateFactory)({id:"a5cNWdqi",block:'[[[1,"\\n    "],[10,"h3"],[12],[1,[28,[32,0],["discourse_assign.assign.title"],null]],[13],[1,"\\n\\n    "],[10,"section"],[14,0,"field"],[12],[1,"\\n      "],[10,0],[14,0,"enable-accepted-answer"],[12],[1,"\\n        "],[10,"label"],[14,0,"checkbox-label"],[12],[1,"\\n          "],[8,[32,1],[[4,[32,2],["change",[30,0,["onChangeSetting"]]],null]],[["@type","@checked"],["checkbox",[28,[31,0],[[30,0,["outletArgs","category","enable_unassigned_filter"]]],null]]],null],[1,"\\n          "],[1,[28,[32,0],["discourse_assign.add_unassigned_filter"],null]],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],[],false,["readonly"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/category-custom-settings/assign-settings.js",scope:()=>[o.i18n,e.Input,t.on],isStrictMode:!0}),this)}},[(0,n.classNames)("assign-settings")])
s.default=a}),define("discourse/plugins/discourse-assign/discourse/connectors/group-reports-nav-item/assigned-topic-list",["exports","@ember/component","@ember-decorators/component","discourse/plugins/discourse-assign/discourse/components/group-assigned-menu-item","@ember/template-factory"],function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const o=dt7948.c(class extends e.default{static shouldRender(s,e){return e.currentUser?.can_assign&&s.group.can_show_assigned_tab&&s.group.assignment_count>0}static{(0,e.setComponentTemplate)((0,n.createTemplateFactory)({id:"TE9VbxDf",block:'[[[8,[32,0],null,[["@group"],[[30,0,["group"]]]],null]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/group-reports-nav-item/assigned-topic-list.js",scope:()=>[i.default],isStrictMode:!0}),this)}},[(0,t.classNames)("group-reports-nav-item-outlet","assigned-topic-list"),(0,t.tagName)("li")])
s.default=o})
define("discourse/plugins/discourse-assign/discourse/connectors/groups-interaction-custom-options/assignable-interaction-fields",["exports","@glimmer/component","@ember/object","discourse-i18n","select-kit/components/combo-box","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends e.default{assignableLevelOptions=[{name:(0,i.i18n)("groups.alias_levels.nobody"),value:0},{name:(0,i.i18n)("groups.alias_levels.only_admins"),value:1},{name:(0,i.i18n)("groups.alias_levels.mods_and_admins"),value:2},{name:(0,i.i18n)("groups.alias_levels.members_mods_and_admins"),value:3},{name:(0,i.i18n)("groups.alias_levels.owners_mods_and_admins"),value:4},{name:(0,i.i18n)("groups.alias_levels.everyone"),value:99}]
get assignableLevel(){return this.args.outletArgs.model.get("assignable_level")||0}onChangeAssignableLevel(s){this.args.outletArgs.model.set("assignable_level",s)}static{dt7948.n(this.prototype,"onChangeAssignableLevel",[t.action])}static{(0,o.setComponentTemplate)((0,r.createTemplateFactory)({id:"cuF8ZR5g",block:'[[[1,"\\n    "],[10,0],[14,0,"control-group"],[12],[1,"\\n      "],[10,"label"],[14,0,"control-label"],[12],[1,"\\n        "],[1,[28,[32,0],["discourse_assign.admin.groups.manage.interaction.assign"],null]],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,"label"],[14,"for","visibility"],[12],[1,"\\n        "],[1,[28,[32,0],["discourse_assign.admin.groups.manage.interaction.assignable_levels.title"],null]],[1,"\\n      "],[13],[1,"\\n\\n      "],[8,[32,1],[[24,0,"groups-form-assignable-level"]],[["@name","@valueProperty","@value","@content","@onChange"],["alias","value",[30,0,["assignableLevel"]],[30,0,["assignableLevelOptions"]],[30,0,["onChangeAssignableLevel"]]]],null],[1,"\\n    "],[13],[1,"\\n  "]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/groups-interaction-custom-options/assignable-interaction-fields.js",scope:()=>[i.i18n,n.default],isStrictMode:!0}),this)}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/connectors/user-activity-bottom/assigned-list",["exports","@ember/component","@ember/routing","@ember-decorators/component","discourse/helpers/d-icon","discourse-i18n","@ember/template-factory"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const a=dt7948.c(class extends e.default{static{(0,e.setComponentTemplate)((0,r.createTemplateFactory)({id:"AeDcTEZk",block:'[[[1,"\\n"],[41,[30,0,["currentUser","can_assign"]],[[[1,"      "],[8,[32,0],null,[["@route"],["userActivity.assigned"]],[["default"],[[[[1,"\\n        "],[1,[28,[32,1],["user-plus"],null]],[1,"\\n        "],[1,[28,[32,2],["discourse_assign.assigned"],null]],[1,"\\n      "]],[]]]]],[1,"\\n"]],[]],null],[1,"  "]],[],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/user-activity-bottom/assigned-list.js",scope:()=>[t.LinkTo,n.default,o.i18n],isStrictMode:!0}),this)}},[(0,i.classNames)("user-activity-bottom-outlet","assigned-list"),(0,i.tagName)("li")])
s.default=a}),define("discourse/plugins/discourse-assign/discourse/connectors/user-preferences-notifications/remind-assigns-frequency",["exports","@ember/component","@ember-decorators/component","discourse/plugins/discourse-assign/discourse/components/remind-assigns-frequency","@ember/template-factory"],function(s,e,t,i,n){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const o=dt7948.c(class extends e.default{static shouldRender(s,e){return e.currentUser?.can_assign}static{(0,e.setComponentTemplate)((0,n.createTemplateFactory)({id:"F7rQIr8u",block:'[[[8,[32,0],null,[["@user"],[[30,0,["model"]]]],null]],[],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/user-preferences-notifications/remind-assigns-frequency.js",scope:()=>[i.default],isStrictMode:!0}),this)}},[(0,t.classNames)("user-preferences-notifications-outlet","remind-assigns-frequency"),(0,t.tagName)("div")])
s.default=o}),define("discourse/plugins/discourse-assign/discourse/connectors/user-preferences-tracking-topics/notification-level-when-assigned",["exports","@glimmer/component","@ember/helper","@ember/service","discourse-i18n","select-kit/components/combo-box","@ember/component","@ember/template-factory"],function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class u extends e.default{static{dt7948.g(this.prototype,"siteSettings",[i.service])}#t=void dt7948.i(this,"siteSettings")
constructor(s,e){super(...arguments),this.siteSettings.assign_enabled&&e.outletArgs.customAttrNames.push("notification_level_when_assigned")}get notificationLevelsWhenAssigned(){return[{name:(0,n.i18n)("user.notification_level_when_assigned.watch_topic"),value:"watch_topic"},{name:(0,n.i18n)("user.notification_level_when_assigned.track_topic"),value:"track_topic"},{name:(0,n.i18n)("user.notification_level_when_assigned.do_nothing"),value:"do_nothing"}]}static{(0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"nxeRdcvO",block:'[[[1,"\\n"],[41,[30,0,["siteSettings","assign_enabled"]],[[[1,"      "],[10,0],[14,0,"controls controls-dropdown"],[14,"data-setting-name","user-notification-level-when-assigned"],[12],[1,"\\n        "],[10,"label"],[12],[1,[28,[32,0],["user.notification_level_when_assigned.label"],null]],[13],[1,"\\n        "],[8,[32,1],null,[["@content","@value","@valueProperty","@onChange"],[[30,0,["notificationLevelsWhenAssigned"]],[30,1,["model","user_option","notification_level_when_assigned"]],"value",[28,[32,2],[[28,[31,1],[[30,1,["model","user_option","notification_level_when_assigned"]]],null]],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "]],["@outletArgs"],false,["if","mut"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/connectors/user-preferences-tracking-topics/notification-level-when-assigned.js",scope:()=>[n.i18n,o.default,t.fn],isStrictMode:!0}),this)}}s.default=u}),define("discourse/plugins/discourse-assign/discourse/controllers/bulk-assign",["exports","@ember/controller","@ember/object"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class i extends e.default{static{dt7948.g(this.prototype,"topicBulkActions",[e.inject])}#l=void dt7948.i(this,"topicBulkActions")
model
formApi={submit(){}}
async assign(){return this.topicBulkActions.performAndRefresh({type:"assign",username:this.model.username,note:this.model.note})}static{dt7948.n(this.prototype,"assign",[t.action])}}s.default=i}),define("discourse/plugins/discourse-assign/discourse/controllers/group-assigned-show",["exports","@ember/controller","@ember/object","@ember/object/computed","@ember/service","discourse/controllers/user-topics-list","discourse/lib/bulk-select-helper","discourse/lib/debounce","discourse/lib/environment"],function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class d extends o.default{static{dt7948.g(this.prototype,"taskActions",[n.service])}#s=void dt7948.i(this,"taskActions")
static{dt7948.g(this.prototype,"router",[n.service])}#i=void dt7948.i(this,"router")
static{dt7948.g(this.prototype,"user",[e.inject])}#p=void dt7948.i(this,"user")
queryParams=["order","ascending","search"]
order=""
ascending=!1
search=""
bulkSelectEnabled=!1
bulkSelectHelper=new r.default(this)
selected=[]
static{dt7948.g(this.prototype,"canBulkSelect",[(0,i.alias)("currentUser.staff")])}#g=void dt7948.i(this,"canBulkSelect")
_setSearchTerm(s){this.set("search",s),this.refreshModel()}refreshModel(){this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search,direct:this.model.params.direct}}).then(s=>this.set("model",s)).finally(()=>{this.set("loading",!1)})}async unassign(s,e="Topic"){await this.taskActions.unassign(s,e),this.router.refresh()}static{dt7948.n(this.prototype,"unassign",[t.action])}reassign(s){this.taskActions.showAssignModal(s,{onSuccess:()=>this.router.refresh()})}static{dt7948.n(this.prototype,"reassign",[t.action])}changeSort(s){s===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:s,ascending:!1}),this.refreshModel())}static{dt7948.n(this.prototype,"changeSort",[t.action])}onChangeFilter(s){(0,a.default)(this,this._setSearchTerm,s,2*u.INPUT_DELAY)}static{dt7948.n(this.prototype,"onChangeFilter",[t.action])}toggleBulkSelect(){this.toggleProperty("bulkSelectEnabled")}static{dt7948.n(this.prototype,"toggleBulkSelect",[t.action])}refresh(){this.refreshModel()}static{dt7948.n(this.prototype,"refresh",[t.action])}}s.default=d}),define("discourse/plugins/discourse-assign/discourse/controllers/group-assigned",["exports","@ember/controller","@ember/object","@ember/service","discourse/lib/ajax","discourse/lib/debounce","discourse/lib/decorators","discourse/lib/environment"],function(s,e,t,i,n,o,r,a){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class u extends e.default{static{dt7948.g(this.prototype,"router",[i.service])}#i=void dt7948.i(this,"router")
static{dt7948.g(this.prototype,"application",[e.inject])}#m=void dt7948.i(this,"application")
loading=!1
offset=0
filterName=""
filter=""
order(s){return s||""}static{dt7948.n(this.prototype,"order",[(0,r.default)("router.currentRoute.queryParams.order")])}ascending(s){return s||!1}static{dt7948.n(this.prototype,"ascending",[(0,r.default)("router.currentRoute.queryParams.ascending")])}search(s){return s||""}static{dt7948.n(this.prototype,"search",[(0,r.default)("router.currentRoute.queryParams.search")])}isDesktop(s){return!s}static{dt7948.n(this.prototype,"isDesktop",[(0,r.default)("site.mobileView")])}_setFilter(s){this.set("loading",!0),this.set("offset",0),this.set("filter",s)
const e=this.group.name;(0,n.ajax)(`/assign/members/${e}`,{type:"GET",data:{filter:this.filter,offset:this.offset}}).then(s=>{"everyone"!==this.router.currentRoute.params.filter&&this.router.transitionTo("group.assigned.show",e,"everyone"),this.set("members",s.members)}).finally(()=>{this.set("loading",!1)})}findMembers(s){s?this.set("members",this.model.members):!this.loading&&this.model&&this.model.members.length>=this.offset+50&&(this.set("loading",!0),this.set("offset",this.offset+50),(0,n.ajax)(`/assign/members/${this.group.name}`,{type:"GET",data:{filter:this.filter,offset:this.offset}}).then(s=>{this.members.pushObjects(s.members)}).finally(()=>this.set("loading",!1)))}loadMore(){this.findMembers()}static{dt7948.n(this.prototype,"loadMore",[t.action])}onChangeFilterName(s){(0,o.default)(this,this._setFilter,s,2*a.INPUT_DELAY)}static{dt7948.n(this.prototype,"onChangeFilterName",[t.action])}}s.default=u}),define("discourse/plugins/discourse-assign/discourse/controllers/user-activity-assigned",["exports","@ember/controller","@ember/object","@ember/service","@ember/template","discourse/controllers/user-topics-list","discourse/lib/debounce","discourse/lib/decorators","discourse/lib/environment","discourse/lib/get-url","discourse/lib/icon-library","discourse-i18n"],function(s,e,t,i,n,o,r,a,u,d,c,l){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class p extends o.default{static{dt7948.g(this.prototype,"taskActions",[i.service])}#s=void dt7948.i(this,"taskActions")
static{dt7948.g(this.prototype,"user",[e.inject])}#p=void dt7948.i(this,"user")
queryParams=["order","ascending","search"]
order=""
ascending=!1
search=""
doesntHaveAssignments(s,e){return!e&&!s}static{dt7948.n(this.prototype,"doesntHaveAssignments",[(0,a.default)("model.topics.length","search")])}emptyStateBody(){return(0,n.htmlSafe)((0,l.i18n)("user.no_assignments_body",{preferencesUrl:(0,d.default)("/my/preferences/notifications"),icon:(0,c.iconHTML)("user-plus")}))}static{dt7948.n(this.prototype,"emptyStateBody",[a.default])}_setSearchTerm(s){this.set("search",s),this.refreshModel()}refreshModel(){this.set("loading",!0),this.store.findFiltered("topicList",{filter:this.model.filter,params:{order:this.order,ascending:this.ascending,search:this.search}}).then(s=>this.set("model",s)).finally(()=>{this.set("loading",!1)})}changeSort(s){s===this.order?(this.toggleProperty("ascending"),this.refreshModel()):(this.setProperties({order:s,ascending:!1}),this.refreshModel())}static{dt7948.n(this.prototype,"changeSort",[t.action])}onChangeFilter(s){(0,r.default)(this,this._setSearchTerm,s,2*u.INPUT_DELAY)}static{dt7948.n(this.prototype,"onChangeFilter",[t.action])}}s.default=p}),define("discourse/plugins/discourse-assign/discourse/initializers/assign-extend-user-messages",["exports","discourse/lib/plugin-api","discourse-i18n"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={name:"assign-extend-user-messages",initialize(s){(0,e.withPluginApi)(e=>{const i=s.lookup("service:current-user")
i?.can_assign&&e.addUserMessagesNavigationDropdownRow&&e.addUserMessagesNavigationDropdownRow("userPrivateMessages.assigned",(0,t.i18n)("discourse_assign.assigned"),"user-plus")})}}}),define("discourse/plugins/discourse-assign/discourse/initializers/assign-user-menu",["exports","@ember/template","discourse/lib/plugin-api","discourse/lib/text","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/user-menu/assigns-list"],function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={name:"assign-user-menu",initialize(s){(0,t.withPluginApi)(t=>{if(!s.lookup("service:site-settings").assign_enabled)return
const r=t.getCurrentUser()
r?.can_assign&&(t.registerNotificationTypeRenderer&&t.registerNotificationTypeRenderer("assigned",s=>class extends s{get linkTitle(){return this.isGroup()?(0,n.i18n)(`user.assigned_to_group.${this.postOrTopic()}`,{group_name:this.notification.data.display_username}):(0,n.i18n)(`user.assigned_to_you.${this.postOrTopic()}`)}get icon(){return this.isGroup()?"group-plus":"user-plus"}get label(){return this.isGroup()?this.notification.data.display_username:""}get description(){return(0,e.htmlSafe)((0,i.emojiUnescape)((0,n.i18n)(`user.assignment_description.${this.postOrTopic()}`,{topic_title:this.notification.fancy_title,post_number:this.notification.post_number})))}isGroup(){return"discourse_assign.assign_group_notification"===this.notification.data.message}postOrTopic(){return 1===this.notification.post_number?"topic":"post"}}),t.registerUserMenuTab&&t.registerUserMenuTab(s=>class extends s{id="assign-list"
panelComponent=o.default
icon="user-plus"
notificationTypes=["assigned"]
get count(){return this.getUnreadCountForType("assigned")}get linkWhenActive(){return`${this.currentUser.path}/activity/assigned`}}))})}}}),define("discourse/plugins/discourse-assign/discourse/initializers/assignment-list-actions",["exports","discourse/lib/plugin-api","discourse/plugins/discourse-assign/discourse/components/assigned-topic-list-column","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const r=["userActivity.assigned","group.assigned.show"],a=(0,i.setComponentTemplate)((0,n.createTemplateFactory)({id:"NpvT5AIj",block:'[[[1,"\\n  "],[10,"td"],[14,0,"assign-topic-buttons"],[12],[1,"\\n    "],[8,[32,0],null,[["@topic"],[[30,1]]],null],[1,"\\n  "],[13],[1,"\\n"]],["@topic"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/initializers/assignment-list-actions.js",scope:()=>[t.default],isStrictMode:!0}),(0,o.default)(void 0,"assignment-list-actions:AssignActionsCell"))
s.default={name:"assignment-list-dropdowns",initialize(s){const t=s.lookup("service:router");(0,e.withPluginApi)(s=>{s.registerValueTransformer("topic-list-columns",({value:s})=>(r.includes(t.currentRouteName)&&s.add("assign-actions",{item:a,after:"activity"}),s)),s.registerValueTransformer("topic-list-item-class",({value:s})=>(r.includes(t.currentRouteName)&&s.push("assigned-list-item"),s))})}}}),define("discourse/plugins/discourse-assign/discourse/initializers/extend-for-assigns",["exports","@ember/object","@ember/owner","@ember/template","@ember/utils","virtual-dom","discourse/helpers/user-avatar","discourse/lib/decorators","discourse/lib/deprecated","discourse/lib/get-url","discourse/lib/icon-library","discourse/lib/plugin-api","discourse/lib/register-topic-footer-dropdown","discourse/lib/transformer","discourse/lib/utilities","discourse/widgets/raw-html","discourse/widgets/render-glimmer","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/assign-button","discourse/plugins/discourse-assign/discourse/components/bulk-actions/bulk-assign-user","discourse/plugins/discourse-assign/discourse/components/modal/edit-topic-assignments","discourse/plugins/discourse-assign/discourse/components/post-assignments-display","discourse/plugins/discourse-assign/discourse/components/topic-level-assign-menu","discourse/plugins/discourse-assign/discourse/lib/url","discourse/plugins/discourse-assign/discourse/models/topic","@ember/template-factory"],function(s,e,t,i,n,o,r,a,u,d,c,l,p,g,m,h,f,_,b,y,v,w,T,A,k,S){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
const j=["topic.assigned_to_user","topic.assigned_to_group","currentUser.can_assign","topic.assigned_to_user.username","topic.assigned_to_user.name"]
function x(s){const e=s.assigned_to_user?.username||s.assigned_to_group?.name
return e?(0,_.i18n)("discourse_assign.unassign.help",{username:e}):(0,_.i18n)("discourse_assign.assign.help")}function P(s){const t=s.container.lookup("service:site-settings"),r=s.getCurrentUser();(t.assigns_public||r?.can_assign)&&(s.addNavigationBarItem({name:"unassigned",customFilter:s=>"true"===s?.custom_fields?.enable_unassigned_filter,customHref:s=>{if(s)return(0,d.default)(s.url)+"/l/latest?status=open&assigned=nobody"},forceActive:(s,e)=>{const t=e.currentRouteQueryParams
return t&&2===Object.keys(t).length&&"nobody"===t.assigned&&"open"===t.status},before:"top"}),s.getCurrentUser()?.can_assign&&function(s){s.registerValueTransformer("post-menu-buttons",({value:s,context:{post:e,state:t,firstButtonKey:i,lastHiddenButtonKey:n,secondLastHiddenButtonKey:o}})=>{s.add("assign",b.default,e.assigned_to_user?.id===t.currentUser.id?{before:i}:{before:n,after:o})})}(s)),s.addAdvancedSearchOptions(s.getCurrentUser()?.can_assign?{inOptionsForUsers:[{name:(0,_.i18n)("search.advanced.in.assigned"),value:"assigned"},{name:(0,_.i18n)("search.advanced.in.unassigned"),value:"unassigned"}]}:{}),s.modifyClass("model:bookmark",s=>class extends s{assignedToUserPath(s){return(0,A.assignedToUserPath)(s)}static{dt7948.n(this.prototype,"assignedToUserPath",[(0,a.default)("assigned_to_user")])}assignedToGroupPath(s){return(0,A.assignedToGroupPath)(s)}static{dt7948.n(this.prototype,"assignedToGroupPath",[(0,a.default)("assigned_to_group")])}}),s.modifyClass("component:topic-notifications-button",s=>class extends s{get reasonText(){return this.currentUser.never_auto_track_topics&&this.args.topic.get("assigned_to_user.username")===this.currentUser.username?(0,_.i18n)("notification_reason.user"):super.reasonText}}),s.addDiscoveryQueryParam("assigned",{replace:!0,refreshModel:!0}),s.addTagsHtmlCallback((s,e={})=>{const[i,n,o]=Object.values(s.getProperties("assigned_to_user","assigned_to_group","assignment_note","assignment_status")),r={assignee:i||n,note:o}
let a
a=s.indirectly_assigned_to?Object.entries(s.indirectly_assigned_to).map(([s,e])=>(e.assigned_to.assignedToPostId=s,e)):[]
const u=[].concat(r,a.map(s=>({assignee:s.assigned_to,note:s.assignment_note}))).filter(({assignee:s})=>s).flat()
if(!u)return""
const l=({assignee:i,note:n})=>{let o
o=i.assignedToPostId?`/p/${i.assignedToPostId}`:`/t/${s.id}`
const r=(0,c.iconHTML)(i.username?"user-plus":"group-plus"),a=(t.prioritize_full_name_in_ux||!i.username)&&i.name||i.username,u=e.tagName||"a"
return`<${u} class="assigned-to discourse-tag simple" ${"a"===u?`href="${(0,d.default)(o)}" data-auto-route="true"`:""}>${r}<span title="${(0,m.escapeExpression)(n)}">${a}</span></${u}>`}
if(1===u.length)return l(u[0])
let p=""
return u.forEach((e,t)=>{if(p+=l(e),t<u.length-1){const e=(0,g.applyValueTransformer)("tag-separator",",",{topic:s,index:t})
p+=`<span class="discourse-tags__tag-separator">${e}</span>`}}),p}),s.modifyClass("model:group",s=>class extends s{asJSON(){return Object.assign({},super.asJSON(...arguments),{assignable_level:this.assignable_level})}}),s.modifyClass("controller:topic",s=>class extends s{subscribe(){super.subscribe(...arguments),this.messageBus.subscribe("/staff/topic-assignment",s=>{const e=this.model,t=e.id
if(s.topic_id===t){let t
s.post_id&&(t=e.postStream.posts.find(e=>e.id===s.post_id))
const i=t||e
i.assignment_note=s.assignment_note,i.assignment_status=s.assignment_status,"User"===s.assigned_type&&(i.assigned_to_user_id="assigned"===s.type?s.assigned_to.id:null,i.assigned_to_user=s.assigned_to),"Group"===s.assigned_type&&(i.assigned_to_group_id="assigned"===s.type?s.assigned_to.id:null,i.assigned_to_group=s.assigned_to),s.post_id&&("assigned"===s.type?e.indirectly_assigned_to[s.post_id].assigned_to=s.assigned_to:"unassigned"===s.type&&delete e.indirectly_assigned_to[s.post_id],this.appEvents.trigger("post-stream:refresh",{id:e.postStream.posts[0].id}),this.appEvents.trigger("post-stream:refresh",{id:s.post_id})),e.closed&&this.appEvents.trigger("post-stream:refresh",{id:e.postStream.posts[0].id})}e.indirectly_assigned_to=e.indirectly_assigned_to,this.appEvents.trigger("header:update-topic",e),this.appEvents.trigger("post-stream:refresh",{id:e.postStream.posts[0].id})})}unsubscribe(){super.unsubscribe(...arguments),this.model?.id&&this.messageBus.unsubscribe("/staff/topic-assignment")}}),function(s,e){s.addTrackedPostProperties("assigned_to_group","assigned_to_group_id","assigned_to_user","assigned_to_user_id","assignment_note","assignment_status"),s.modifyClass("model:post",s=>class extends s{get can_edit(){return!!M(this.action_code)||super.can_edit}set can_edit(s){super.can_edit=s}get isSmallAction(){return!!M(this.action_code)||super.isSmallAction}}),s.renderAfterWrapperOutlet("post-content-cooked-html",w.default),s.addPostSmallActionClassesCallback(s=>{if((s.action_code||s.actionCode).includes("assigned")&&!e.assigns_public)return["private-assign"]}),s.addPostSmallActionIcon("assigned","user-plus"),s.addPostSmallActionIcon("assigned_to_post","user-plus"),s.addPostSmallActionIcon("assigned_group","group-plus"),s.addPostSmallActionIcon("assigned_group_to_post","group-plus"),s.addPostSmallActionIcon("unassigned","user-xmark"),s.addPostSmallActionIcon("unassigned_group","group-times"),s.addPostSmallActionIcon("unassigned_from_post","user-xmark"),s.addPostSmallActionIcon("unassigned_group_from_post","group-times"),s.addPostSmallActionIcon("reassigned","user-plus"),s.addPostSmallActionIcon("reassigned_group","group-plus"),(0,u.withSilencedDeprecations)("discourse.post-stream-widget-overrides",()=>function(s){s.decorateWidget("post-contents:after-cooked",s=>{const e=s.getModel()
if(e){let t,i,n,o
if(1===s.attrs.post_number)return s.widget.attach("assigned-to-first-post",{topic:e.topic})
if(n=e.topic.indirectly_assigned_to?.[e.id]?.assigned_to,n?.username&&(t=n),n?.name&&(i=n),(t||i)&&(o=t?(0,A.assignedToUserPath)(t):(0,A.assignedToGroupPath)(i)),o)return s.widget.attach("assigned-to-post",{assignedToUser:t,assignedToGroup:i,href:o,post:e})}}),s.createWidget("assigned-to-post",{html(s){return new f.default(this,"p.assigned-to",(0,S.createTemplateFactory)({id:"m6Kc+XrX",block:'[[[1,"\\n          "],[8,[39,0],null,[["@assignedToUser","@assignedToGroup","@href","@post"],[[30,1,["assignedToUser"]],[30,1,["assignedToGroup"]],[30,1,["href"]],[30,1,["post"]]]],null]],["@data"],false,["assigned-to-post"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/initializers/extend-for-assigns.js",isStrictMode:!1}),{assignedToUser:s.post.assigned_to_user,assignedToGroup:s.post.assigned_to_group,href:s.href,post:s.post})}}),s.createWidget("assigned-to-first-post",{html(s){const e=s.topic,[t,r,a]=[e.assigned_to_user,e.assigned_to_group,e.indirectly_assigned_to],u=[],d=(s,e,t)=>`<span class="assigned-to--${t}">${(0,i.htmlSafe)((0,_.i18n)("discourse_assign.assigned_topic_to",{username:s,path:e}))}</span>`
let l=""
if(t&&(l=this.siteSettings.prioritize_full_name_in_ux&&t.name||t.username,u.push((0,o.h)("span.assignee",new h.default({html:d(l,(0,A.assignedToUserPath)(t),"user")})))),r&&u.push((0,o.h)("span.assignee",new h.default({html:d(r.name,(0,A.assignedToGroupPath)(r),"group")}))),a&&Object.keys(a).map(s=>{const t=a[s].assigned_to,i=a[s].post_number
l=this.siteSettings.prioritize_username_in_ux&&t.username?t.username:t.name||t.username,u.push((0,o.h)("span.assignee",[(0,o.h)("a",{attributes:{class:"assigned-indirectly",href:`${e.url}/${i}`}},(0,_.i18n)("discourse_assign.assign_post_to_multiple",{post_number:i,username:l}))]))}),!(0,n.isEmpty)(u))return(0,o.h)("p.assigned-to",[t?(0,c.iconNode)("user-plus"):(0,c.iconNode)("group-plus"),t||r?"":(0,o.h)("span.assign-text",(0,_.i18n)("discourse_assign.assigned")),u])}}),s.addPostTransformCallback(s=>{M(s.actionCode)&&(s.isSmallAction=!0,s.canEdit=!0)})}(s))}(s,t),s.replaceIcon("notification.assigned","user-plus"),s.replaceIcon("notification.discourse_assign.assign_group_notification","group-plus"),s.modifyClass("controller:preferences/notifications",s=>class extends s{save(){this.saveAttrNames.push("custom_fields"),super.save(...arguments)}static{dt7948.n(this.prototype,"save",[e.action])}}),s.addKeyboardShortcut("g a","",{path:"/my/activity/assigned"})}function M(s){return["assigned","unassigned","reassigned","assigned_group","unassigned_group","reassigned_group","assigned_to_post","assigned_group_to_post","unassigned_from_post","unassigned_group_from_post","details_change","note_change","status_change"].includes(s)}const C=/^(assigned:)/gi
s.default={name:"extend-for-assign",initialize(s){s.lookup("service:site-settings").assign_enabled&&(0,l.withPluginApi)(e=>{const n=s.lookup("service:current-user")
n?.can_assign&&e.modifyClass("component:search-advanced-options",s=>class extends s{updateSearchTermForAssignedUsername(){const s=this.filterBlocks(C),e=this.searchedTerms?.assigned
let t=this.searchTerm||"",i="assigned"
0!==e?.length?(0!==s.length?t=t.replace(s[0],`${i}:${e}`):t+=` ${i}:${e}`,this._updateSearchTerm(t)):0!==s.length&&(t=t.replace(s[0],""),this._updateSearchTerm(t))}}),(0,k.extendTopicModel)(e),P(e),function(s){(0,p.registerTopicFooterDropdown)(T.default),s.registerTopicFooterButton({id:"assign",icon(){return this.topic.isAssigned()?this.site.mobileView?"user-xmark":null:"user-plus"},priority:250,translatedTitle(){return x(this.topic)},translatedAriaLabel(){return x(this.topic)},translatedLabel:()=>(0,_.i18n)("discourse_assign.assign.title"),async action(){if(!this.currentUser?.can_assign)return
const s=(0,t.getOwner)(this).lookup("service:task-actions"),e=(0,t.getOwner)(this).lookup("service:modal")
this.topic.isAssigned()?(this.topic.assigned_to_user=null,this.topic.assigned_to_group=null,await s.unassign(this.topic.id,"Topic"),this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})):await e.show(v.default,{model:{topic:this.topic},onSuccess:()=>this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})})},dropdown(){return this.site.mobileView},classNames:["assign"],dependentKeys:j,displayed(){return this.currentUser?.can_assign&&!this.topic.isAssigned()&&!this.topic.hasAssignedPosts()}}),s.registerTopicFooterButton({id:"unassign-mobile-header",translatedTitle(){return x(this.topic)},translatedAriaLabel(){return x(this.topic)},translatedLabel(){const s=this.topic.assigned_to_user,e=this.topic.assigned_to_group,t=(0,_.i18n)("discourse_assign.assigned_to_w_ellipsis")
return s?(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${t}</span><span class="username">${s.username}</span></span>${(0,r.renderAvatar)(s,{imageSize:"small",ignoreTitle:!0})}`):e?(0,i.htmlSafe)(`<span class="unassign-label">${t}</span> @${e.name}`):void 0},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:j,displayed(){return this.currentUser?.can_assign&&this.site.mobileView}}),s.registerTopicFooterButton({id:"unassign-mobile",icon:()=>"user-xmark",translatedTitle(){return x(this.topic)},translatedAriaLabel(){return x(this.topic)},translatedLabel(){const s=(0,_.i18n)("discourse_assign.unassign.title")
return(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${s}</span></span>`)},action(){if(!this.currentUser?.can_assign)return
const s=(0,t.getOwner)(this).lookup("service:task-actions")
this.topic.assigned_to_user=null,this.topic.assigned_to_group=null,s.unassign(this.topic.id).then(()=>{this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})})},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:j,displayed(){return this.currentUser?.can_assign&&this.site.mobileView&&this.topic.isAssigned()}}),s.registerTopicFooterButton({id:"reassign-self-mobile",icon:()=>"user-plus",translatedTitle:()=>(0,_.i18n)("discourse_assign.reassign.to_self_help"),translatedAriaLabel:()=>(0,_.i18n)("discourse_assign.reassign.to_self_help"),translatedLabel(){const s=(0,_.i18n)("discourse_assign.reassign.to_self")
return(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${s}</span></span>`)},async action(){if(!this.currentUser?.can_assign)return
const s=(0,t.getOwner)(this).lookup("service:task-actions")
this.topic.assigned_to_user=null,this.topic.assigned_to_group=null,await s.reassignUserToTopic(this.currentUser,this.topic),this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:j,displayed(){return this.site.mobileView&&this.currentUser?.can_assign&&this.topic.isAssigned()&&this.topic.assigned_to_user?.username!==this.currentUser.username}}),s.registerTopicFooterButton({id:"reassign-mobile",icon:()=>"group-plus",translatedTitle:()=>(0,_.i18n)("discourse_assign.reassign.help"),translatedAriaLabel:()=>(0,_.i18n)("discourse_assign.reassign.help"),translatedLabel(){const s=(0,_.i18n)("discourse_assign.reassign.title_w_ellipsis")
return(0,i.htmlSafe)(`<span class="unassign-label"><span class="text">${s}</span></span>`)},async action(){if(!this.currentUser?.can_assign)return
const s=(0,t.getOwner)(this).lookup("service:task-actions")
await s.showAssignModal(this.topic,{targetType:"Topic",isAssigned:this.topic.isAssigned(),onSuccess:()=>this.appEvents.trigger("post-stream:refresh",{id:this.topic.postStream.firstPostId})})},dropdown(){return this.currentUser?.can_assign&&this.topic.isAssigned()},classNames:["assign"],dependentKeys:j,displayed(){return this.currentUser?.can_assign&&this.site.mobileView}})}(e),e.addSearchSuggestion("in:assigned"),e.addSearchSuggestion("in:unassigned"),e.addGroupPostSmallActionCode("assigned_group"),e.addGroupPostSmallActionCode("reassigned_group"),e.addGroupPostSmallActionCode("unassigned_group"),e.addGroupPostSmallActionCode("assigned_group_to_post"),e.addGroupPostSmallActionCode("unassigned_group_from_post"),e.addUserSearchOption("assignableGroups"),e.addSaveableUserOptionField("notification_level_when_assigned"),e.addBulkActionButton({id:"assign-topics",label:"topics.bulk.assign",icon:"user-plus",class:"btn-default assign-topics",action({setComponent:s}){s(y.default)},actionType:"setComponent"}),e.addBulkActionButton({id:"unassign-topics",label:"topics.bulk.unassign",icon:"user-xmark",class:"btn-default unassign-topics",action({performAndRefresh:s}){s({type:"unassign"})},actionType:"performAndRefresh"})})}}}),define("discourse/plugins/discourse-assign/discourse/lib/url",["exports","discourse/lib/get-owner","discourse/lib/get-url"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.assignedToGroupPath=function(s){return(0,t.default)(`/g/${s.name}/assigned/everyone`)},s.assignedToUserPath=function(s){const i=(0,e.getOwnerWithFallback)(this).lookup("service:site-settings")
return(0,t.default)(i.assigns_user_url_path.replace("{username}",s.username))}}),define("discourse/plugins/discourse-assign/discourse/models/assignment",["exports","@glimmer/tracking","@ember/object"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.Assignment=void 0
class i extends t.default{static fromTopic(s){const e=new i
return e.id=0,e.username=s.assigned_to_user?.username,e.groupName=s.assigned_to_group?.name,e.status=s.assignment_status,e.note=s.assignment_note,e.targetId=s.id,e.targetType="Topic",e}static fromPost(s){const e=new i
return e.username=s.assigned_to.username,e.name=s.assigned_to.name,e.groupName=s.assigned_to.name,e.status=s.assignment_status,e.note=s.assignment_note,e.targetId=s.postId,e.targetType="Post",e.postNumber=s.post_number,e.id=s.post_number,e}static{dt7948.g(this.prototype,"group_name",[e.tracked])}#h=void dt7948.i(this,"group_name")
static{dt7948.g(this.prototype,"isEdited",[e.tracked],function(){return!1})}#f=void dt7948.i(this,"isEdited")
static{dt7948.g(this.prototype,"name",[e.tracked])}#_=void dt7948.i(this,"name")
static{dt7948.g(this.prototype,"note",[e.tracked])}#b=void dt7948.i(this,"note")
static{dt7948.g(this.prototype,"status",[e.tracked])}#y=void dt7948.i(this,"status")
static{dt7948.g(this.prototype,"username",[e.tracked])}#v=void dt7948.i(this,"username")
targetId
targetType
postNumber}s.Assignment=i}),define("discourse/plugins/discourse-assign/discourse/models/topic",["exports","@glimmer/tracking","discourse/plugins/discourse-assign/discourse/models/assignment"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.extendTopicModel=function(s){s.modifyClass("model:topic",s=>class extends s{static{dt7948.g(this.prototype,"assigned_to_group",[e.tracked])}#w=void dt7948.i(this,"assigned_to_group")
static{dt7948.g(this.prototype,"assigned_to_group_id",[e.tracked])}#T=void dt7948.i(this,"assigned_to_group_id")
static{dt7948.g(this.prototype,"assigned_to_user",[e.tracked])}#A=void dt7948.i(this,"assigned_to_user")
static{dt7948.g(this.prototype,"assigned_to_user_id",[e.tracked])}#k=void dt7948.i(this,"assigned_to_user_id")
static{dt7948.g(this.prototype,"assignment_note",[e.tracked])}#S=void dt7948.i(this,"assignment_note")
static{dt7948.g(this.prototype,"assignment_status",[e.tracked])}#j=void dt7948.i(this,"assignment_status")
static{dt7948.g(this.prototype,"indirectly_assigned_to",[e.tracked])}#x=void dt7948.i(this,"indirectly_assigned_to")
assignees(){const s=[]
this.assigned_to_user&&s.push(this.assigned_to_user)
const e=this.assignedPosts().map(s=>s.assigned_to)
return s.push(...e),s}uniqueAssignees(){const s=new Map
return this.assignees().forEach(e=>s.set(e.username,e)),[...s.values()]}assignedPosts(){return this.indirectly_assigned_to?Object.entries(this.indirectly_assigned_to).map(([s,e])=>(e.postId=s,e)):[]}assignments(){return[this.topicAssignment(),...this.postAssignments()].compact()}postAssignments(){return this.indirectly_assigned_to?Object.entries(this.indirectly_assigned_to).map(([s,e])=>(e.postId=s,t.Assignment.fromPost(e))):[]}topicAssignment(){return t.Assignment.fromTopic(this)}isAssigned(){return this.assigned_to_user||this.assigned_to_group}isAssignedTo(s){return this.assigned_to_user?.username===s.username}hasAssignedPosts(){return!!this.postAssignments().length}})}}),define("discourse/plugins/discourse-assign/discourse/pre-initializers/extend-category-for-assign",["exports","@ember/object","discourse/models/category"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default={name:"extend-category-for-assign",before:"inject-discourse-objects",initialize(){t.default.reopen({enable_unassigned_filter:(0,e.computed)("custom_fields.enable_unassigned_filter",{get(){return"true"===this?.custom_fields?.enable_unassigned_filter}})})}}}),define("discourse/plugins/discourse-assign/discourse/routes/group-assigned-show",["exports","discourse/lib/cached-topic-list","discourse/routes/discourse"],function(s,e,t){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class i extends t.default{model(s){let t
return t=["everyone",this.modelFor("group").name].includes(s.filter)?`topics/group-topics-assigned/${this.modelFor("group").name}`:`topics/messages-assigned/${s.filter}`,(0,e.findOrResetCachedTopicList)(this.session,t)||this.store.findFiltered("topicList",{filter:t,params:{order:s.order,ascending:s.ascending,search:s.search,direct:"everyone"!==s.filter}})}setupController(s,e){s.setProperties({model:e,search:this.currentModel.params.search})}}s.default=i}),define("discourse/plugins/discourse-assign/discourse/routes/group-assigned",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class n extends i.default{static{dt7948.g(this.prototype,"router",[e.service])}#i=void dt7948.i(this,"router")
model(){return(0,t.ajax)(`/assign/members/${this.modelFor("group").name}`)}setupController(s,e){s.setProperties({model:e,members:[],group:this.modelFor("group")}),s.group.setProperties({assignment_count:e.assignment_count,group_assignment_count:e.group_assignment_count}),s.findMembers(!0)}redirect(s,e){e.to.params.hasOwnProperty("filter")||this.router.transitionTo("group.assigned.show","everyone")}}s.default=n}),define("discourse/plugins/discourse-assign/discourse/routes/user-activity-assigned",["exports","@ember/service","discourse/routes/user-topic-list","discourse-i18n"],function(s,e,t,i){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class n extends t.default{static{dt7948.g(this.prototype,"router",[e.service])}#i=void dt7948.i(this,"router")
templateName="user-activity-assigned"
controllerName="user-activity-assigned"
userActionType=16
noContentHelpKey="discourse_assigns.no_assigns"
beforeModel(){this.currentUser||this.send("showLogin")}model(s){return this.store.findFiltered("topicList",{filter:`topics/messages-assigned/${this.modelFor("user").username_lower}`,params:{exclude_category_ids:[-1],order:s.order,ascending:s.ascending,search:s.search}})}titleToken(){return(0,i.i18n)("discourse_assign.assigned")}}s.default=n}),define("discourse/plugins/discourse-assign/discourse/routes/user-private-messages-assigned-index",["exports","discourse/routes/build-private-messages-route"],function(s,e){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.default)("assigned","private-messages-assigned","assigned")}),define("discourse/plugins/discourse-assign/discourse/services/task-actions",["exports","@glimmer/tracking","@ember/service","@ember/utils","discourse/lib/ajax","discourse/lib/ajax-error","discourse/plugins/discourse-assign/discourse/components/modal/assign-user"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
class a extends t.default{static{dt7948.g(this.prototype,"modal",[t.service])}#P=void dt7948.i(this,"modal")
static{dt7948.g(this.prototype,"allowedGroups",[e.tracked])}#M=void dt7948.i(this,"allowedGroups")
static{dt7948.g(this.prototype,"allowedGroupsForAssignment",[e.tracked])}#C=void dt7948.i(this,"allowedGroupsForAssignment")
#O
static{dt7948.g(this.prototype,"_suggestions",[e.tracked])}#U=void dt7948.i(this,"_suggestions")
get suggestions(){return this._suggestions?this._suggestions:(this.#O||=this.#F(),null)}async#F(){const s=await(0,n.ajax)("/assign/suggestions")
this.isDestroying||this.isDestroyed||(this._suggestions=s.suggestions,this.allowedGroups=s.assign_allowed_on_groups,this.allowedGroupsForAssignment=s.assign_allowed_for_groups)}unassign(s,e="Topic"){return(0,n.ajax)("/assign/unassign",{type:"PUT",data:{target_id:s,target_type:e}})}async unassignPost(s){await this.unassign(s.id,"Post"),delete s.topic.indirectly_assigned_to[s.id],s.topic.indirectly_assigned_to=s.topic.indirectly_assigned_to}showAssignModal(s,{isAssigned:e=!1,targetType:t="Topic",onSuccess:i}){return this.modal.show(r.default,{model:{reassign:e,username:s.assigned_to_user?.username,group_name:s.assigned_to_group?.name,status:s.assignment_status,target:s,targetType:t,onSuccess:i}})}showAssignPostModal(s){return this.showAssignModal(s,{targetType:"Post"})}reassignUserToTopic(s,e,t="Topic"){return(0,n.ajax)("/assign/assign",{type:"PUT",data:{username:s.username,target_id:e.id,target_type:t,status:e.assignment_status}})}async assign(s){(0,i.isEmpty)(s.username)&&(s.target.assigned_to_user=null),(0,i.isEmpty)(s.group_name)&&(s.target.assigned_to_group=null)
let e="/assign/assign";(0,i.isEmpty)(s.username)&&(0,i.isEmpty)(s.group_name)&&(e="/assign/unassign")
try{await(0,n.ajax)(e,{type:"PUT",data:{username:s.username,group_name:s.group_name,target_id:s.target.id,target_type:s.targetType,note:s.note,status:s.status}}),s.onSuccess?.()}catch(t){(0,o.popupAjaxError)(t)}}async putAssignment(s){await(0,n.ajax)("/assign/assign",{type:"PUT",data:{username:s.username,group_name:s.group_name,target_id:s.targetId,target_type:s.targetType,note:s.note,status:s.status}})}}s.default=a}),define("discourse/plugins/discourse-assign/discourse/templates/group-assigned-show",["exports","@ember/component","@ember/modifier","ember-route-template","discourse/components/basic-topic-list","discourse/components/conditional-loading-spinner","discourse/components/load-more","discourse/helpers/with-event-value","discourse-i18n","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r,a,u,d,c){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,i.default)((0,e.setComponentTemplate)((0,d.createTemplateFactory)({id:"jE7jErnP",block:'[[[1,"\\n    "],[10,0],[14,0,"topic-search-div"],[12],[1,"\\n      "],[10,0],[14,0,"inline-form full-width"],[12],[1,"\\n        "],[8,[32,0],[[16,"placeholder",[28,[32,1],["discourse_assign.topic_search_placeholder"],null]],[24,"autocomplete","off"],[24,0,"no-blur"],[4,[32,2],["input",[28,[32,3],[[30,1,["onChangeFilter"]]],null]],null]],[["@value","@type"],[[28,[31,0],[[30,1,["search"]]],null],"search"]],null],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[8,[32,4],[[24,0,"paginated-topics-list"]],[["@selector","@action"],[".paginated-topics-list .topic-list tr",[30,1,["loadMore"]]]],[["default"],[[[[1,"\\n      "],[8,[32,5],null,[["@topicList","@hideCategory","@showPosters","@bulkSelectEnabled","@canBulkSelect","@selected","@hasIncoming","@incomingCount","@showInserted","@tagsForUser","@changeSort","@toggleBulkSelect","@bulkSelectAction","@bulkSelectHelper","@unassign","@reassign","@onScroll","@scrollOnLoad"],[[30,1,["model"]],[30,1,["hideCategory"]],[30,1,["showPosters"]],[30,1,["bulkSelectEnabled"]],[30,1,["canBulkSelect"]],[30,1,["selected"]],[30,1,["hasIncoming"]],[30,1,["incomingCount"]],[30,1,["showInserted"]],[30,1,["tagsForUser"]],[30,1,["changeSort"]],[30,1,["toggleBulkSelect"]],[30,1,["refresh"]],[30,1,["bulkSelectHelper"]],[30,1,["unassign"]],[30,1,["reassign"]],[30,1,["saveScrollPosition"]],true]],null],[1,"\\n\\n      "],[8,[32,6],null,[["@condition"],[[30,1,["model","loadingMore"]]]],null],[1,"\\n    "]],[]]]]],[1,"\\n  "]],["@controller"],false,["readonly"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/templates/group-assigned-show.js",scope:()=>[e.Input,u.i18n,t.on,a.default,r.default,n.default,o.default],isStrictMode:!0}),(0,c.default)(void 0,void 0)))}),define("discourse/plugins/discourse-assign/discourse/templates/group/assigned",["exports","@ember/component","@ember/modifier","ember-route-template","discourse/components/conditional-loading-spinner","discourse/components/load-more","discourse/components/mobile-nav","discourse/helpers/body-class","discourse/helpers/with-event-value","discourse-i18n","discourse/plugins/discourse-assign/discourse/components/group-assigned-filter","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r,a,u,d,c,l,p){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,i.default)((0,e.setComponentTemplate)((0,l.createTemplateFactory)({id:"gdDhWESZ",block:'[[[1,"\\n    "],[10,"section"],[14,0,"user-secondary-navigation group-assignments"],[12],[1,"\\n      "],[1,[28,[32,0],["group-assign"],null]],[1,"\\n      "],[8,[32,1],[[24,0,"activity-nav"]],[["@desktopClass"],["action-list activity-list nav-stacked"]],[["default"],[[[[1,"\\n"],[41,[30,1,["isDesktop"]],[[[1,"          "],[10,0],[14,0,"search-div"],[12],[1,"\\n            "],[8,[32,2],[[16,"placeholder",[28,[32,3],["discourse_assign.sidebar_name_filter_placeholder"],null]],[24,0,"search"],[4,[32,4],["input",[28,[32,5],[[30,1,["onChangeFilterName"]]],null]],null]],[["@type","@value"],["text",[28,[31,1],[[30,1,["filterName"]]],null]]],null],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"\\n        "],[8,[32,6],null,[["@selector","@action"],[".activity-nav li",[30,1,["loadMore"]]]],[["default"],[[[[1,"\\n          "],[8,[32,7],null,[["@showAvatar","@filter","@routeType","@assignmentCount","@search","@ascending","@order"],[false,"everyone",[30,1,["route_type"]],[30,1,["group","assignment_count"]],[30,1,["search"]],[30,1,["ascending"]],[30,1,["order"]]]],null],[1,"\\n\\n          "],[8,[32,7],null,[["@showAvatar","@groupName","@filter","@routeType","@assignmentCount","@search","@ascending","@order"],[false,[30,1,["group","name"]],[30,1,["group","name"]],[30,1,["route_type"]],[30,1,["group","group_assignment_count"]],[30,1,["search"]],[30,1,["ascending"]],[30,1,["order"]]]],null],[1,"\\n\\n"],[42,[28,[31,3],[[28,[31,3],[[30,1,["members"]]],null]],null],null,[[[1,"            "],[8,[32,7],null,[["@showAvatar","@filter","@routeType","@search","@ascending","@order"],[true,[30,2],[30,1,["route_type"]],[30,1,["search"]],[30,1,["ascending"]],[30,1,["order"]]]],null],[1,"\\n"]],[2]],null],[1,"\\n          "],[8,[32,8],null,[["@condition"],[[30,1,["loading"]]]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,"section"],[14,0,"user-content"],[12],[1,"\\n      "],[46,[28,[31,5],null,null],null,null,null],[1,"\\n    "],[13],[1,"\\n  "]],["@controller","member"],false,["if","readonly","each","-track-array","component","-outlet"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/templates/group/assigned.js",scope:()=>[a.default,r.default,e.Input,d.i18n,t.on,u.default,o.default,c.default,n.default],isStrictMode:!0}),(0,p.default)(void 0,void 0)))}),define("discourse/plugins/discourse-assign/discourse/templates/modal/bulk-assign",["exports","ember-route-template","discourse/components/d-button","discourse/plugins/discourse-assign/discourse/components/assign-user-form","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,e.default)((0,n.setComponentTemplate)((0,o.createTemplateFactory)({id:"z4hg3gfV",block:'[[[1,"\\n    "],[10,0],[12],[1,"\\n      "],[8,[32,0],null,[["@model","@onSubmit","@formApi"],[[30,1,["model"]],[30,1,["assign"]],[30,1,["formApi"]]]],null],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[12],[1,"\\n      "],[8,[32,1],[[24,0,"btn-primary"]],[["@action","@label"],[[30,1,["formApi","submit"]],[52,[30,1,["model","reassign"]],"discourse_assign.reassign.title","discourse_assign.assign_modal.assign"]]],null],[1,"\\n    "],[13],[1,"\\n  "]],["@controller"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/templates/modal/bulk-assign.js",scope:()=>[i.default,t.default],isStrictMode:!0}),(0,r.default)(void 0,void 0)))}),define("discourse/plugins/discourse-assign/discourse/templates/user-activity-assigned",["exports","@ember/component","@ember/modifier","ember-route-template","discourse/components/basic-topic-list","discourse/components/conditional-loading-spinner","discourse/components/empty-state","discourse/components/load-more","discourse/helpers/with-event-value","discourse-i18n","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r,a,u,d,c,l){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,i.default)((0,e.setComponentTemplate)((0,c.createTemplateFactory)({id:"y38OkP05",block:'[[[1,"\\n"],[41,[30,1,["doesntHaveAssignments"]],[[[1,"      "],[8,[32,0],null,[["@title","@body"],[[28,[32,1],["user.no_assignments_title"],null],[30,1,["emptyStateBody"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,0],[14,0,"topic-search-div"],[12],[1,"\\n        "],[10,0],[14,0,"inline-form full-width"],[12],[1,"\\n          "],[8,[32,2],[[16,"placeholder",[28,[32,1],["discourse_assign.topic_search_placeholder"],null]],[24,"autocomplete","off"],[24,0,"no-blur"],[4,[32,3],["input",[28,[32,4],[[30,1,["onChangeFilter"]]],null]],null]],[["@value","@type"],[[28,[31,1],[[30,1,["search"]]],null],"search"]],null],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[8,[32,5],[[24,0,"paginated-topics-list"]],[["@selector","@action"],[".paginated-topics-list .topic-list tr",[30,1,["loadMore"]]]],[["default"],[[[[1,"\\n        "],[8,[32,6],null,[["@topicList","@hideCategory","@showPosters","@bulkSelectEnabled","@selected","@hasIncoming","@incomingCount","@showInserted","@tagsForUser","@changeSort","@unassign","@reassign","@onScroll","@scrollOnLoad"],[[30,1,["model"]],[30,1,["hideCategory"]],true,[30,1,["bulkSelectEnabled"]],[30,1,["selected"]],[30,1,["hasIncoming"]],[30,1,["incomingCount"]],[30,1,["showInserted"]],[30,1,["tagsForUser"]],[30,1,["changeSort"]],[30,1,["unassign"]],[30,1,["reassign"]],[30,1,["saveScrollPosition"]],true]],null],[1,"\\n\\n        "],[8,[32,7],null,[["@condition"],[[30,1,["model","loadingMore"]]]],null],[1,"\\n      "]],[]]]]],[1,"\\n"]],[]]],[1,"  "]],["@controller"],false,["if","readonly"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/templates/user-activity-assigned.js",scope:()=>[r.default,d.i18n,e.Input,t.on,u.default,a.default,n.default,o.default],isStrictMode:!0}),(0,l.default)(void 0,void 0)))}),define("discourse/plugins/discourse-assign/discourse/templates/user-private-messages-assigned",["exports","@ember/routing","ember-route-template","discourse/components/user-nav/messages-secondary-nav","discourse/helpers/d-icon","discourse-i18n","@ember/component","@ember/template-factory","@ember/component/template-only"],function(s,e,t,i,n,o,r,a,u){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0
s.default=(0,t.default)((0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"/ts2IsrA",block:'[[[1,"\\n    "],[8,[32,0],null,null,[["default"],[[[[1,"\\n      "],[10,"li"],[14,0,"messages-assigned-latest"],[12],[1,"\\n        "],[8,[32,1],null,[["@route"],["userPrivateMessages.assigned.index"]],[["default"],[[[[1,"\\n          "],[1,[28,[32,2],["envelope"],null]],[1,"\\n          "],[10,1],[12],[1,[28,[32,3],["categories.latest"],null]],[13],[1,"\\n        "]],[]]]]],[1,"\\n      "],[13],[1,"\\n    "]],[]]]]],[1,"\\n\\n    "],[46,[28,[31,1],null,null],null,null,null],[1,"\\n  "]],[],false,["component","-outlet"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-assign/discourse/templates/user-private-messages-assigned.js",scope:()=>[i.default,e.LinkTo,n.default,o.i18n],isStrictMode:!0}),(0,u.default)(void 0,void 0)))})

//# sourceMappingURL=discourse-assign-2415d691.map